webpackJsonp([0],{151:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(9),r=a(5),d=a(340),n=a(33);t.default=function*(e,t){for(;;){const{delta:a}=yield l.take("TICK"),i=yield*t(a),W=yield l.select(n.playerTank,e),{game:{AIFrozenTimeout:o}}=yield l.select();if(null==W||0<W.frozenTimeout||"ai"===W.side&&0<o)continue;let s=0>=W.frozenTimeout?0:W.frozenTimeout-a;if(null==i)W.moving&&(yield l.put({type:"STOP_MOVE",tankId:W.tankId}));else if("turn"===i.type){const{direction:e}=i,t=W.set("direction",e),{xy:a}=r.getDirectionInfo(e,!0),o=W.get(a)/8,n=t.set(a,8*Math.floor(o)),s=t.set(a,8*Math.ceil(o)),p=yield l.select(d.default,n),u=yield l.select(d.default,s);let b;b=p?u?t.set(a,8*Math.round(o)):n:s,yield l.put({type:"MOVE",tank:b})}else if("forward"===i.type){const e=r.getTankMoveSpeed(W),t=Math.min(a*e,i.maxDistance||Infinity),{xy:n,updater:o}=r.getDirectionInfo(W.direction),s=W.update(n,o(t));(yield l.select(d.default,s))&&(yield l.put({type:"MOVE",tank:s}),!W.moving&&(yield l.put({type:"START_MOVE",tankId:W.tankId})))}else throw new Error(`Invalid input: ${i}`);W.frozenTimeout!==s&&(yield l.put({type:"SET_FROZEN_TIMEOUT",tankId:W.tankId,frozenTimeout:s}))}}},152:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(9),n=a(5),r=a(33),d=a(10);t.default=function*(e,t){for(;;){const{delta:a}=yield l.take("TICK"),{bullets:i}=yield l.select(),W=yield l.select(r.playerTank,e),{game:{AIFrozenTimeout:o}}=yield l.select();if(null==W||"ai"===W.side&&0<o)continue;let s=0>=W.cooldown?0:W.cooldown-a;if(0>=W.cooldown&&t()){const t=i.filter((e)=>e.tankId===W.tankId);if(t.count()<n.getTankBulletLimit(W)){const{x:t,y:a}=n.calculateBulletStartPosition(W);yield l.put({type:"ADD_BULLET",bullet:d.BulletRecord({bulletId:n.getNextId("bullet"),direction:W.direction,x:t,y:a,lastX:t,lastY:a,power:n.getTankBulletPower(W),speed:n.getTankBulletSpeed(W),tankId:W.tankId,playerName:e})}),s=n.getTankBulletInterval(W)}}W.cooldown!==s&&(yield l.put({type:"SET_COOLDOWN",tankId:W.tankId,cooldown:s}))}}},154:function(e,t,a){"use strict";function*l(e,a){let t=0,l=0;for(const{t:n,v:d}of e)for(yield*a(d),l+=n;;){const{delta:e}=yield r.take("TICK");if(t+=e,t>=l)break}}Object.defineProperty(t,"__esModule",{value:!0});const n=a(16),r=a(9);t.applySpawnSpeed=function(e,a){return e.map(({t:e,v:t})=>({t:e/a,v:t}))},t.default=l,t.nonPauseDelay=function(e){return r.call(l,[{v:null,t:e}],()=>[])},t.tween=function*(e,t){for(let a=0;a<e;){const{delta:l}=yield r.take("TICK");a+=l,yield t(n.clamp(a/e,0,1))}}},159:function(e,t,a){a(160),e.exports=a(163)},160:function(e,t,a){e.exports=a(161)},161:function(e,t,a){"use strict";e.exports=a(162)},162:function(){"use strict"},163:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(52);const l=a(0),n=a(53),r=a(254),d=a(11),i=a(283),W=a(355);(function(e){n.render(l.createElement(r.AppContainer,null,l.createElement(d.Provider,{store:i.default},l.createElement(e,null))),document.getElementById("container"))})(W.default),!1},18:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(342);t.spawnTank=l.default;var n=a(343);t.destroyBullets=n.default;var r=a(344);t.destroyTanks=r.default;var d=a(154);t.timing=d.default,t.nonPauseDelay=d.nonPauseDelay,t.tween=d.tween,t.applySpawnSpeed=d.applySpawnSpeed;var i=a(345);t.flickerSaga=i.default},254:function(e,t,a){e.exports=a(255)},255:function(e,t,a){"use strict";e.exports=a(256)},256:function(e,t,a){"use strict";e.exports.AppContainer=a(257)},257:function(e,t,a){"use strict";e.exports=a(258)},258:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(){function e(e,t){for(var a,l=0;l<t.length;l++)a=t[l],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),i=a(0),W=i.Component,o=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),d(t,[{key:"render",value:function(){return this.props.component?i.createElement(this.props.component,this.props.props):i.Children.only(this.props.children)}}]),t}(W);e.exports=o},283:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(40),n=a(31),r=a(50),d=a(338),i=n.default();t.default=l.createStore(r.default,l.applyMiddleware(i)),i.run(d.default)},33:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(16),n=a(1),r=a(5),d=a(41);t.playerTank=(e,t)=>{const{active:a,activeTankId:l}=e.players.get(t);return a?e.tanks.get(l,null):null},t.availableSpawnPosition=(e)=>{const t=[],a=e.tanks.filter((e)=>e.active);outer:for(const e of[0,6*n.BLOCK_SIZE,12*n.BLOCK_SIZE]){const l={x:e,y:0,width:n.TANK_SIZE,height:n.TANK_SIZE};for(const e of a.values())if(r.testCollide(l,r.asRect(e)))continue outer;t.push(l)}return l.sample(t)},t.validPowerUpSpawnPositions=({map:{bricks:e,rivers:a,steels:l,eagle:t}})=>{const i=[];for(let W=0;W<(n.FIELD_BLOCK_SIZE-1)*n.BLOCK_SIZE;W+=0.5*n.BLOCK_SIZE)for(let o,s=0;s<(n.FIELD_BLOCK_SIZE-1)*n.BLOCK_SIZE;s+=0.5*n.BLOCK_SIZE){o=0;partLoop:for(const n of[{x:s+4,y:W+4,width:4,height:4},{x:s+8,y:W+4,width:4,height:4},{x:s+4,y:W+8,width:4,height:4},{x:s+8,y:W+8,width:4,height:4}]){for(const a of d.default.iter("brick",n))if(e.get(a)){o++;continue partLoop}for(const e of d.default.iter("steel",n))if(l.get(e)){o++;continue partLoop}for(const e of d.default.iter("river",n))if(a.get(e)){o++;continue partLoop}if(r.testCollide(r.asRect(t),n)){o++;continue partLoop}}(1==o||2==o||3==o)&&i.push({x:s,y:W})}return i}},338:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(9),n=a(339),r=a(341),d=a(347),i=a(350),W=a(77),o=a(352),s=a(353),p=a(1);t.default=function*(){console.debug("root saga started"),yield l.fork(W.default),yield l.fork(r.default),yield l.fork(s.default),yield l.fork(n.default,"player-1",p.CONTROL_CONFIG.player1),yield l.fork(n.default,"player-2",p.CONTROL_CONFIG.player2),yield l.fork(i.default),yield l.fork(o.default,"player-1","yellow"),yield l.fork(d.default)}},339:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(9),n=a(33),r=a(16),d=a(151),i=a(152),W=a(153);t.default=function*(e,t){function a(){for(let e of navigator.getGamepads())if(e&&"Xbox 360 Controller (XInput STANDARD GAMEPAD)"===e.id)return e.index;return-1}function o(){if(-1!==a()){const e=navigator.getGamepads()[a()];if(e){if(0.5<e.axes[0])return{direction:"right"};return-0.5>e.axes[0]?{direction:"left"}:0.5<e.axes[1]?{direction:"down"}:-0.5>e.axes[1]?{direction:"up"}:{direction:null}}}else return 0<c.length?{direction:r.last(c)}:{direction:null}}function s(){if(-1!==a()){const e=navigator.getGamepads()[a()];return e&&e.buttons[6].pressed}return b||E}function p(e,t){W.bind(e,()=>{-1===c.indexOf(t)&&c.push(t)},"keydown"),W.bind(e,()=>{r.pull(c,t)},"keyup")}function*u(){const t=yield l.select(n.playerTank,e);if(null!=t){const{direction:e}=o();if(null!=e)return e===t.direction?{type:"forward"}:{type:"turn",direction:e}}return null}let b=!1,E=!1;W.bind(t.fire,()=>{b=!0,E=!0},"keydown"),W.bind(t.fire,()=>b=!1,"keyup"),yield l.fork(function*(){for(;;)yield l.take("TICK"),E=!1});const c=[];for(p(t.up,"up"),p(t.left,"left"),p(t.down,"down"),p(t.right,"right");;){const t=yield l.take("ACTIVATE_PLAYER");t.playerName===e&&(yield l.all([d.default(e,u),i.default(e,s)]))}}},340:function(e,t,a){"use strict";function l(e,t,a){const l={x:e.x,y:e.y,width:s.BLOCK_SIZE,height:s.BLOCK_SIZE};return o.testCollide(l,t,a)}function n(e,a,l){for(const n of p.default.iter("brick",a))if(e.get(n)){const e=p.default.getRect("brick",n);if(o.testCollide(e,a,l))return!0}return!1}function r(e,a,l){for(const n of p.default.iter("steel",a))if(e.get(n)){const e=p.default.getRect("steel",n);if(o.testCollide(e,a,l))return!0}return!1}function d(e,a,l){for(const n of p.default.iter("river",a))if(e.get(n)){const e=p.default.getRect("river",n);if(o.testCollide(e,a,l))return!0}return!1}function i(e,t,a){return e.some((e)=>o.testCollide(e,t,a))}function W(e,t,a,l){for(const n of e.values()){if(t.tankId===n.tankId)continue;const e=o.asRect(n);if(o.testCollide(e,a,l))return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0});const o=a(5),s=a(1),p=a(41);t.default=function(e,t,a=-0.01){const{tanks:s,map:{bricks:p,steels:u,rivers:b,eagle:E,restrictedAreas:c}}=e,P=o.asRect(t);if(!o.isInField(P))return!1;if(l(E,P,a))return!1;if(n(p,P,a))return!1;if(r(u,P,a))return!1;if(d(b,P,a))return!1;if(i(c,P,a))return!1;const y=s.filter((e)=>e.active);return!W(y,t,P,a)}},341:function(e,t,a){"use strict";function*l(){for(;;){const{delta:e}=yield P.take("TICK"),{bullets:t}=yield P.select();if(t.isEmpty())continue;const a=t.map((t)=>{const{direction:a,speed:l}=t,{xy:n,updater:r}=f.getDirectionInfo(a);return t.update(n,r(l*e)).set("lastX",t.x).set("lastY",t.y)});yield P.put({type:"UPDATE_BULLETS",updatedBullets:a})}}function n(e,t){const{bullets:a,map:{bricks:l}}=t;a.forEach((a)=>{const n=g.getMBR(f.asRect(a),f.asRect(g.lastPos(a)));for(const r of m.default.iter("brick",n))l.get(r)&&e.bulletCollisionInfo.get(a.bulletId).push({type:"brick",t:r})})}function r({bulletCollisionInfo:e},t){const{bullets:a,map:{steels:l}}=t;a.forEach((a)=>{const n=g.getMBR(f.asRect(a),f.asRect(g.lastPos(a)));for(const r of m.default.iter("steel",n))l.get(r)&&e.get(a.bulletId).push({type:"steel",t:r})})}function d({bulletCollisionInfo:e},t){const{bullets:a}=t;a.forEach((t)=>{0>=t.x&&e.get(t.bulletId).push({type:"border",which:"left"}),t.x+y.BULLET_SIZE>=y.FIELD_SIZE&&e.get(t.bulletId).push({type:"border",which:"right"}),0>=t.y&&e.get(t.bulletId).push({type:"border",which:"up"}),t.y+y.BULLET_SIZE>=y.FIELD_SIZE&&e.get(t.bulletId).push({type:"border",which:"down"})})}function*i(e){const{map:{steels:a}}=yield P.select(),l=[];e.forEach((e)=>{if(e.power>=y.STEEL_POWER)for(const n of m.default.iter("steel",g.spreadBullet(e)))a.get(n)&&l.push(n)}),0<l.length&&(yield P.put({type:"REMOVE_STEELS",ts:c.Set(l)}))}function*W(e){const{map:{bricks:a}}=yield P.select(),l=[];e.forEach((e)=>{for(const n of m.default.iter("brick",g.spreadBullet(e)))a.get(n)&&l.push(n)}),0<l.length&&(yield P.put({type:"REMOVE_BRICKS",ts:c.Set(l)}))}function*o(e){const{map:{eagle:t}}=yield P.select(),a=f.asRect(t);for(const t of e.values()){const e=g.spreadBullet(t);if(f.testCollide(a,e))return void(yield P.put({type:"DESTROY_EAGLE"}))}}function s(e,t){const{bullets:a,tanks:l}=t,n=l.filter((e)=>e.active);for(const r of a.values())for(const t of n.values()){if(t.tankId===r.tankId)continue;const a=f.asRect(t),n=g.getMBR(f.asRect(g.lastPos(r)),f.asRect(r));if(f.testCollide(a,n,-0.02)){const a=l.find((e)=>e.tankId===r.tankId).side,n=t.side,d=e.bulletCollisionInfo.get(r.bulletId);if("human"===a&&"human"===n)d.push({type:"tank",tank:t,shouldExplode:!0}),e.frozenTankIdSet.add(t.tankId);else if("human"===a&&"ai"===n)e.tankHitMap.get(t.tankId).push(r),d.push({type:"tank",tank:t,shouldExplode:!0});else if("ai"===a&&"human"===n)0<t.helmetDuration?d.push({type:"tank",tank:t,shouldExplode:!1}):(e.tankHitMap.get(t.tankId).push(r),d.push({type:"tank",tank:t,shouldExplode:!0}));else if("ai"===a&&"ai"===n);else throw new Error("Error side status")}}}function p(e,t,a){const{bullets:l}=t;for(const n of l.values())for(const t of l.values()){if(n.bulletId<=t.bulletId)continue;const l=g.getCollisionInfoBetweenBullets(n,t,a);if(l){const[a,r]=l;e.bulletCollisionInfo.get(n.bulletId).push(a),e.bulletCollisionInfo.get(t.bulletId).push(r)}}}function u({bulletCollisionInfo:e},t){const{bullets:a,map:{eagle:l}}=t;if(!(null==l||l.broken)){const t=f.asRect(l);for(const n of a.values()){const a=g.getMBR(f.asRect(n),f.asRect(g.lastPos(n)));f.testCollide(t,a)&&e.get(n.bulletId).push({type:"eagle",eagle:l})}}}function b({tanks:e,players:t},a){const l=[],n=[];for(const[r,d]of a.tankHitMap.entries()){const a=d.length,i=e.get(r);if(a>=i.hp){const a=d[0].tankId,n=d[0].playerName;l.push({type:"KILL",targetTank:i,sourceTank:e.get(a),targetPlayer:t.find((e)=>e.activeTankId===r),sourcePlayer:t.get(n),method:"bullet"})}else n.push({type:"HURT",targetTank:i,hurt:a})}return{kills:l,hurts:n}}function*E(){for(;;){const{delta:e}=yield P.take("AFTER_TICK"),t=yield P.select(),a={tankHitMap:new f.DefaultMap(()=>[]),frozenTankIdSet:new Set,bulletCollisionInfo:new g.BulletCollisionInfo(t.bullets)};u(a,t),s(a,t),p(a,t,e),n(a,t),r(a,t),d(a,t);const{expBullets:l,noExpBullets:E}=a.bulletCollisionInfo.getExplosionInfo();yield P.fork(w.destroyBullets,l,!0),yield P.fork(w.destroyBullets,E,!1),l.isEmpty()||(yield*o(l),yield*W(l),yield*i(l));for(const e of a.frozenTankIdSet)yield P.put({type:"SET_FROZEN_TIMEOUT",tankId:e,frozenTimeout:500});const{kills:y,hurts:m}=b(t,a);yield*m.map((e)=>P.put(e)),yield P.fork(w.destroyTanks,c.Map(y.map((e)=>[e.targetTank.tankId,e.targetTank]))),yield*y.map((e)=>P.put(e))}}Object.defineProperty(t,"__esModule",{value:!0});const c=a(6),P=a(9),y=a(1),w=a(18),f=a(5),g=a(346),m=a(41);t.default=function*(){yield P.fork(l),yield P.fork(E)}},342:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(9),n=a(5),r=a(18);t.default=function*(e,t=1){yield l.put({type:"START_SPAWN_TANK",tank:e});const a=n.getNextId("area");yield l.put({type:"ADD_RESTRICTED_AREA",areaId:a,area:n.asRect(e)}),yield*r.flickerSaga(e.x,e.y,t);const d=n.getNextId("tank");return yield l.put({type:"ADD_TANK",tank:e.set("tankId",d)}),yield l.put({type:"REMOVE_RESTRICTED_AREA",areaId:a}),d}},343:function(e,t,a){"use strict";function*l(e){const t=[["s0",W.frame(4)],["s1",W.frame(3)],["s2",W.frame(2)]],a=W.getNextId("explosion");for(const[l,n]of t)yield d.put({type:"ADD_OR_UPDATE_EXPLOSION",explosion:i.ExplosionRecord({cx:e.x+2,cy:e.y+2,shape:l,explosionId:a})}),yield r.delay(n);yield d.put({type:"REMOVE_EXPLOSION",explosionId:a})}function*n(e,t){yield d.put({type:"REMOVE_BULLET",bulletId:e.bulletId}),t&&(yield*l(e))}Object.defineProperty(t,"__esModule",{value:!0});const r=a(31),d=a(9),i=a(10),W=a(5);t.default=function*(e,t){e.isEmpty()||(yield d.all(e.toArray().map((e)=>n(e,t))))}},344:function(e,t,a){"use strict";function*l(e){const t=W.getNextId("score");yield d.put({type:"ADD_SCORE",score:i.ScoreRecord({score:o.TANK_KILL_SCORE_MAP[e.level],scoreId:t,x:e.x,y:e.y})}),yield s.nonPauseDelay(W.frame(48)),yield d.put({type:"REMOVE_SCORE",scoreId:t})}function*n(e){const t=[{v:"s0",t:W.frame(7)},{v:"s1",t:W.frame(5)},{v:"s2",t:W.frame(7)},{v:"b0",t:W.frame(5)},{v:"b1",t:W.frame(7)},{v:"s2",t:W.frame(5)}],a=W.getNextId("explosion");yield*s.timing(t,function*(t){yield d.put({type:"ADD_OR_UPDATE_EXPLOSION",explosion:i.ExplosionRecord({cx:e.x+8,cy:e.y+8,shape:t,explosionId:a})})}),yield d.put({type:"REMOVE_EXPLOSION",explosionId:a})}function*r(e){yield d.put({type:"REMOVE_TANK",tankId:e.tankId}),yield*n(e),"ai"===e.side&&(yield*l(e))}Object.defineProperty(t,"__esModule",{value:!0});const d=a(9),i=a(10),W=a(5),o=a(1),s=a(18);t.default=function*(e){yield d.all(e.toArray().map(r))}},345:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(9),n=a(5),r=a(18),d=a(154),i=a(10),W=[{v:3,t:n.frame(3)},{v:2,t:n.frame(3)},{v:1,t:n.frame(3)},{v:0,t:n.frame(3)},{v:1,t:n.frame(3)},{v:2,t:n.frame(3)},{v:3,t:n.frame(3)},{v:2,t:n.frame(3)},{v:1,t:n.frame(3)},{v:0,t:n.frame(3)},{v:1,t:n.frame(3)},{v:2,t:n.frame(3)},{v:3,t:n.frame(1)}];t.default=function*(e,t,a){const o=n.getNextId("flicker");yield*r.timing(d.applySpawnSpeed(W,a),function*(a){yield l.put({type:"ADD_OR_UPDATE_FLICKER",flicker:i.FlickerRecord({flickerId:o,x:e,y:t,shape:a})})}),yield l.put({type:"REMOVE_FLICKER",flickerId:o})}},346:function(e,t,a){"use strict";function l(...e){let t=Infinity,a=Infinity,l=-Infinity,n=-Infinity;for(const r of e)t=o(t,r.x),a=o(a,r.y),l=W(l,r.x+r.width),n=W(n,r.y+r.height);return{x:t,y:a,width:l-t,height:n-a}}function n(e){return e.merge({x:e.lastX,y:e.lastY})}function r(e){return e.merge({direction:c[e.direction],x:-e.y,y:e.x,lastX:-e.lastY,lastY:e.lastX})}function d(e,t){if("up"===e.direction){if("down"===t.direction)return(e.lastY-t.lastY-b.BULLET_SIZE)/(e.speed+t.speed);if("up"===t.direction)return e.lastY<t.lastY?(t.lastY-e.lastY-b.BULLET_SIZE)/(t.speed-e.speed):d(t,e);if("left"===t.direction){const a={x:e.x,y:t.y,width:b.BULLET_SIZE,height:b.BULLET_SIZE},l=(e.lastY-t.lastY-b.BULLET_SIZE)/e.speed,n=t.lastX-t.speed*l,r={x:n,y:t.y,width:b.BULLET_SIZE,height:b.BULLET_SIZE};if(p.testCollide(a,r))return l;const d=(t.lastX-e.lastX-b.BULLET_SIZE)/t.speed,i=e.lastY-e.speed*d,W={x:e.x,y:i,width:b.BULLET_SIZE,height:b.BULLET_SIZE};return p.testCollide(a,W)?d:-1}else{const a={x:e.x,y:t.y,width:b.BULLET_SIZE,height:b.BULLET_SIZE},l=(e.lastY-t.lastY-b.BULLET_SIZE)/e.speed,n=t.lastX+t.speed*l,r={x:n,y:t.y,width:b.BULLET_SIZE,height:b.BULLET_SIZE};if(p.testCollide(a,r))return l;const d=(e.lastX-t.lastX-b.BULLET_SIZE)/t.speed,i=e.lastY-e.speed*d,W={x:e.x,y:i,width:b.BULLET_SIZE,height:b.BULLET_SIZE};return p.testCollide(a,W)?d:-1}}else return d(r(e),r(t))}function i(e,t){const a=e.speed*t;return"up"===e.direction?{x:e.lastX,y:e.lastY-a}:"down"===e.direction?{x:e.lastX,y:e.lastY+a}:"left"===e.direction?{x:e.lastX-a,y:e.lastY}:{x:e.lastX+a,y:e.lastY}}var W=Math.max,o=Math.min;Object.defineProperty(t,"__esModule",{value:!0});const s=a(6),p=a(5),u=a(41),b=a(1);t.getMBR=l,t.lastPos=n;class E extends p.DefaultMap{constructor(e){super(()=>[]),this.bullets=e}static getCollisionRect(e){const t={x:b.FIELD_SIZE,y:b.FIELD_SIZE,width:-b.FIELD_SIZE,height:-b.FIELD_SIZE};return"brick"===e.type||"steel"===e.type?u.default.getRect(e.type,e.t):"border"===e.type?t:"tank"===e.type?p.asRect(e.tank):"eagle"===e.type?p.asRect(e.eagle):{x:e.x,y:e.y,width:0,height:0}}static shouldExplode(e){for(const t of e)if("border"===t.type||"eagle"===t.type||"brick"===t.type||"steel"===t.type||"tank"===t.type&&t.shouldExplode)return!0;return!1}getExplosionPos(e){const t=this.get(e),a=this.bullets.get(e);if(!E.shouldExplode(t))return null;const l=t.map(E.getCollisionRect);if("right"===a.direction){const e=l.reduce((e,t)=>o(e,t.x),Infinity);return{x:e-b.BULLET_SIZE,y:a.y}}if("left"===a.direction){const e=l.reduce((e,t)=>W(e,t.x+t.width),-Infinity);return{x:e,y:a.y}}if("up"===a.direction){const e=l.reduce((e,t)=>W(e,t.y+t.height),-Infinity);return{x:a.x,y:e}}else{const e=l.reduce((e,t)=>o(e,t.y),Infinity);return{x:a.x,y:e-b.BULLET_SIZE}}}getExplosionInfo(){const e=new Map,t=new Map;for(const a of this.keys()){const l=this.bullets.get(a),n=this.getExplosionPos(a);null==n?t.set(a,l):e.set(a,l.merge(n))}return{expBullets:s.Map(e),noExpBullets:s.Map(t)}}}t.BulletCollisionInfo=E;const c={up:"right",right:"down",down:"left",left:"up"};t.getCollisionInfoBetweenBullets=function(e,t,a){const r=l(p.asRect(n(e)),p.asRect(e)),W=l(p.asRect(n(t)),p.asRect(t));if(!p.testCollide(r,W))return null;const o=d(e,t);if(0<=o&&o<=a){const a=i(e,o),l=i(t,o);return[{type:"bullet",otherBulletId:t.bulletId,x:a.x,y:a.y,otherX:l.x,otherY:l.y},{type:"bullet",otherBulletId:e.bulletId,x:l.x,y:l.y,otherX:a.x,otherY:a.y}]}return null};const P=0.01;t.spreadBullet=function(e){const t=p.asRect(e),a=4+P;return"up"===e.direction||"down"===e.direction?(t.x-=a,t.width+=2*a,t.y-=P,t.height+=P):(t.x-=P,t.width+=2*P,t.y-=a,t.height+=2*a),t}},347:function(e,t,a){"use strict";function*l(e,{direction:t,distance:a,duration:l}){for(let n=0;;){const{delta:r}=yield i.take("TICK"),d=r*(a/l),W=d+n<a?d:a-n;if(yield i.put({type:"UPDATE_TEXT_POSITION",textIds:e,direction:t,distance:W}),n+=W,n>=a)return}}function*n(){const e=o.getNextId("text"),t=o.getNextId("text");yield i.put({type:"SET_TEXT",textId:e,content:"game",fill:"red",x:6.5*W.BLOCK_SIZE,y:13*W.BLOCK_SIZE}),yield i.put({type:"SET_TEXT",textId:t,content:"over",fill:"red",x:6.5*W.BLOCK_SIZE,y:13.5*W.BLOCK_SIZE}),yield*l([e,t],{direction:"up",distance:6*W.BLOCK_SIZE,duration:2e3}),yield p.nonPauseDelay(500),yield i.put({type:"REMOVE_TEXT",textId:e}),yield i.put({type:"REMOVE_TEXT",textId:t}),yield i.put({type:"LOAD_SCENE",scene:"gameover"})}function*r(){yield i.put({type:"SHOW_HUD"})}function*d(){yield i.put({type:"HIDE_HUD"}),yield i.put({type:"CLEAR_BULLETS"}),yield i.put({type:"CLEAR_TANKS"}),yield i.put({type:"CLEAR_AI_PLAYERS"})}Object.defineProperty(t,"__esModule",{value:!0});const i=a(9),W=a(1),o=a(5),s=a(348),p=a(18),u=a(51);t.default=function*(){yield i.takeEvery("START_STAGE",r),yield i.takeEvery("END_STAGE",d),yield i.take((e)=>"GAMESTART"===e.type);const e=Object.keys(u.default);for(const t of e){const e=yield*s.default(t);if(!1,"clear"===e.status);else{console.log(`gameover, reason: ${e.reason}`),yield*n();break}}}},348:function(e,t,a){"use strict";function*l(e){yield n.put({type:"UPDATE_COMING_STAGE_NAME",stageName:e}),yield n.put({type:"UPDATE_CURTAIN",curtainName:"stage-enter-cutain",t:0}),yield*d.tween(r.frame(30),(e)=>n.put({type:"UPDATE_CURTAIN",curtainName:"stage-enter-cutain",t:e})),yield d.nonPauseDelay(r.frame(20)),yield n.put({type:"LOAD_STAGE_MAP",name:e}),yield d.nonPauseDelay(r.frame(20)),yield*d.tween(r.frame(30),(e)=>n.put({type:"UPDATE_CURTAIN",curtainName:"stage-enter-cutain",t:1-e})),yield n.put({type:"START_STAGE",name:e})}Object.defineProperty(t,"__esModule",{value:!0});const n=a(9),r=a(5),d=a(18),i=a(349);t.default=function*(e){for(yield n.put({type:"LOAD_SCENE",scene:"game"}),yield*l(e);;){const e=yield n.take(["KILL","DESTROY_EAGLE"]);if("KILL"===e.type){const{sourcePlayer:t,targetTank:a}=e,{players:l,game:{remainingEnemies:W},tanks:r}=yield n.select();if("human"===t.side){yield n.put({type:"INC_KILL_COUNT",playerName:t.playerName,level:a.level});const e=r.filter((e)=>e.active&&"ai"===e.side);if(W.isEmpty()&&e.isEmpty()){yield d.nonPauseDelay(1500);const{powerUps:e}=yield n.select();return e.isEmpty()||(yield d.nonPauseDelay(5e3)),yield*i.default(),yield n.put({type:"END_STAGE"}),{status:"clear"}}}else if(!l.some((e)=>"human"===e.side&&0<e.lives))return yield d.nonPauseDelay(1500),yield*i.default(),yield n.put({type:"END_STAGE"}),{status:"fail",reason:"all-human-dead"}}else if("DESTROY_EAGLE"===e.type)return{status:"fail",reason:"DESTROY_EAGLE"}}}},349:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(6),n=a(9),r=a(1),d=a(18);t.default=function*(){yield n.put({type:"LOAD_SCENE",scene:"statistics"});const{game:{killInfo:e}}=yield n.select(),t=e.get("player-1",l.Map());yield d.nonPauseDelay(500);for(const e of r.TANK_LEVELS){const{game:{transientKillInfo:a}}=yield n.select();yield d.nonPauseDelay(250);const l=t.get(e,0);if(0===l)yield n.put({type:"UPDATE_TRANSIENT_KILL_INFO",info:a.setIn(["player-1",e],0)});else for(let t=1;t<=l;t+=1)yield n.put({type:"UPDATE_TRANSIENT_KILL_INFO",info:a.setIn(["player-1",e],t)}),yield d.nonPauseDelay(160);yield d.nonPauseDelay(200)}yield d.nonPauseDelay(200),yield n.put({type:"SHOW_TOTAL_KILL_COUNT"}),yield d.nonPauseDelay(1e3)}},350:function(e,t,a){"use strict";function*l(e,t,a){function*l(){const t=yield i.select(E.playerTank,e);if(null==t)return null;if(d&&t.direction!==d){const e=d;return d=null,p=0,{type:"turn",direction:e}}if(0<p){const{xy:e}=W.getDirectionInfo(t.direction),l=Math.abs(t.get(e)-n),r=p-l;return l===p?(p=0,a.put({type:"reach"}),null):{type:"forward",maxDistance:r}}return null}let n,r=!1,d=null,p=0;for(yield i.fork(o.default,e,l),yield i.fork(s.default,e,()=>!!r&&(r=!1,!0));;){const l=yield i.take(t);if("forward"===l.type){const t=yield i.select(E.playerTank,e);if(null==t)continue;const{xy:a}=W.getDirectionInfo(t.direction);n=t.get(a),p=l.forwardLength}else if("fire"===l.type)r=!0;else if("turn"===l.type)d=l.direction;else if(!("query"===l.type))throw new Error;else if("my-tank-info"===l.query){const t=yield i.select(E.playerTank,e);if(null==t)continue;a.put({type:"query-result",result:{type:"my-tank-info",tank:t&&t.toObject()}})}else if("map-info"===l.query){const{map:e}=yield i.select();a.put({type:"query-result",result:{type:"map-info",map:e.toJS()}})}else if("active-tanks-info"===l.query){const{tanks:e}=yield i.select();a.put({type:"query-result",result:{type:"active-tanks-info",tanks:e.filter((e)=>e.active).map((e)=>e.toObject()).toArray()}})}else if("my-fire-info"===l.query){const t=yield i.select(E.playerTank,e);if(null==t)continue;const{bullets:l}=yield i.select(),n=l.filter((e)=>e.tankId===t.tankId).count(),r=n<u.getTankBulletLimit(t)&&0>=t.cooldown;a.put({type:"query-result",result:{type:"my-fire-info",bulletCount:n,canFire:r,cooldown:t.cooldown}})}}}function*n(e,t){yield i.fork(function*(){for(;;){const a=yield i.take(t);e.postMessage(a)}})}function*r(e,t){const a=new t;try{const t=d.channel(),r=d.eventChannel((e)=>{const t=(t)=>e(t.data);return a.addEventListener("message",t),()=>a.removeEventListener("message",t)});yield i.all([l(e,r,t),n(a,t)])}finally{a.terminate()}}Object.defineProperty(t,"__esModule",{value:!0});const d=a(31),i=a(9),W=a(5),o=a(151),s=a(152),p=a(18),u=a(5),b=a(1),E=a(33),c=a(10),P=a(351);t.default=function*(){function*e(){for(;;){yield i.take(a);const{game:{remainingEnemies:e,currentStage:l}}=yield i.select();if(!e.isEmpty()){const a=`AI-${u.getNextId("AI-player")}`;yield i.put({type:"CREATE_PLAYER",player:c.PlayerRecord({playerName:a,lives:Infinity,side:"ai"})});const{x:l,y:n}=yield i.select(E.availableSpawnPosition);yield i.put({type:"REMOVE_FIRST_REMAINING_ENEMY"});const d=e.first(),W="armor"===d?4:1,o=yield*p.spawnTank(c.TankRecord({x:l,y:n,side:"ai",level:d,hp:W,withPowerUp:b.TANK_INDEX_THAT_WITH_POWER_UP.includes(20-e.count())}),0.6),s=yield i.spawn(r,a,P);t.set(a,s),yield i.put({type:"ACTIVATE_PLAYER",playerName:a,tankId:o})}}}const t=new Map,a=d.channel();for(yield i.fork(e);;){const e=yield i.take(["KILL","START_STAGE","GAMEOVER"]);if("START_STAGE"===e.type)for(let e=0;e<2;e++)a.put("add");else if("KILL"===e.type&&"ai"===e.targetTank.side){const{targetPlayer:{playerName:l}}=e,n=t.get(l);n.cancel(),t.delete(e.targetPlayer.playerName),yield i.put({type:"DEACTIVATE_PLAYER",playerName:l}),a.put("add")}else if("GAMEOVER"===e.type){for(const[e,a]of t.entries())a.cancel(),yield i.put({type:"DEACTIVATE_PLAYER",playerName:e});t.clear()}}}},351:function(e,t,a){e.exports=function(){return new Worker(a.p+"4e46397cc7699db208da.worker.js")}},352:function(e,t,a){"use strict";function*l(e){const t=yield i.select(u.playerTank,e);if(null!=t){const{powerUps:a,players:l}=yield i.select(),n=a.find((e)=>o.testCollide(o.asRect(e,-0.5),o.asRect(t)));n&&(yield i.put({type:"PICK_POWER_UP",tank:t,powerUp:n,player:l.get(e)}))}}function*n(e,t){const{players:a}=yield i.select(),l=a.get(e);if(l.reservedTank||0<l.lives){l.reservedTank||(yield i.put({type:"DECREMENT_PLAYER_LIFE",playerName:e})),yield i.put({type:"SET_REVERSED_TANK",playerName:e,reversedTank:null});const a=l.reservedTank||s.TankRecord({side:"human",color:t,level:"basic"}),n=yield*p.spawnTank(a.merge({active:!0,x:4*W.BLOCK_SIZE,y:12*W.BLOCK_SIZE,direction:"up",helmetDuration:o.frame(135)}));yield i.put({type:"ACTIVATE_PLAYER",playerName:e,tankId:n})}}function*r(e){const t=yield i.select(u.playerTank,e);t&&(yield i.put({type:"SET_REVERSED_TANK",playerName:e,reversedTank:t}))}function*d(e,t){const{players:a}=yield i.select(),l=a.get(e);if(0<l.lives){yield i.put({type:"DECREMENT_PLAYER_LIFE",playerName:e});const a=yield*p.spawnTank(s.TankRecord({x:4*W.BLOCK_SIZE,y:12*W.BLOCK_SIZE,side:"human",color:t,level:"basic",helmetDuration:o.frame(180)}));yield i.put({type:"ACTIVATE_PLAYER",playerName:e,tankId:a})}}Object.defineProperty(t,"__esModule",{value:!0});const i=a(9),W=a(1),o=a(5),s=a(10),p=a(18),u=a(33);t.default=function*(e,t){yield i.put({type:"CREATE_PLAYER",player:s.PlayerRecord({playerName:e,lives:3,side:"human"})}),yield i.takeEvery("AFTER_TICK",l,e),yield i.takeEvery("START_STAGE",n,e,t),yield i.takeEvery("END_STAGE",r,e),yield i.takeEvery(function(t){return"KILL"===t.type&&t.targetPlayer.playerName===e},d,e,t)}},353:function(e,t,a){"use strict";function l(e){const{eagle:t,steels:a,bricks:l}=e,n={x:t.x-8,y:t.y-8,width:31,height:31},r=new Set(I.default.iter("brick",n)),d=new Set(I.default.iter("brick",h.asRect(t,-0.1))),i=new Set(Array.from(I.default.iterRowCol("brick",n)).map(([e,t])=>{const a=c(e/2),l=c(t/2);return a*m.N_MAP.STEEL+l})),W=a.map((e,a)=>!i.has(a)&&e),o=l.map((e,a)=>r.has(a)&&!d.has(a)||e);return e.set("steels",W).set("bricks",o)}function n(e){const{eagle:t,steels:a,bricks:l}=e,n={x:t.x-8,y:t.y-8,width:31,height:31},r=new Set(I.default.iter("steel",n)),d=new Set(I.default.iter("steel",h.asRect(t,-0.1))),i=a.map((e,a)=>r.has(a)&&!d.has(a)||e),W=new Set(I.default.iter("brick",n)),o=l.map((e,a)=>!W.has(a)&&e);return e.set("steels",i).set("bricks",o)}function*r(){yield w.put({type:"UPDATE_MAP",map:n((yield w.select()).map)}),yield g.nonPauseDelay(h.frame(1076));for(let e=0;6>e;e++)yield w.put({type:"UPDATE_MAP",map:l((yield w.select()).map)}),yield g.nonPauseDelay(h.frame(16)),yield w.put({type:"UPDATE_MAP",map:n((yield w.select()).map)}),yield g.nonPauseDelay(h.frame(16));yield w.put({type:"UPDATE_MAP",map:l((yield w.select()).map)})}function*d(){for(yield w.put({type:"SET_AI_FROZEN_TIMEOUT",AIFrozenTimeout:5e3});;){const{delta:e}=yield w.take("TICK"),{game:{AIFrozenTimeout:t}}=yield w.select();if(0===t)break;const a=t-e;yield w.put({type:"SET_AI_FROZEN_TIMEOUT",AIFrozenTimeout:0>=a?0:a})}}function*i(e){const{tanks:t,players:a}=yield w.select(),l=t.filter((e)=>e.active&&"ai"===e.side);yield*g.destroyTanks(l),yield*l.map((t)=>w.put({type:"KILL",sourcePlayer:e.player,sourceTank:e.tank,targetPlayer:a.find((e)=>e.activeTankId===t.tankId),targetTank:t,method:"grenade"})).values()}function*W({tank:e}){yield w.put({type:"UPGRADE_TANK",tankId:e.tankId})}function*o({player:e}){yield w.put({type:"INCREMENT_PLAYER_LIFE",playerName:e.playerName})}function*s({tank:e}){yield w.put({type:"SET_HELMET_DURATION",tankId:e.tankId,duration:h.frame(630)})}function*p(){for(;;){const{delta:e}=yield w.take("TICK"),{tanks:t}=yield w.select();yield*t.filter((e)=>e.active&&0<e.helmetDuration).map((t)=>w.put({type:"SET_HELMET_DURATION",tankId:t.tankId,duration:t.helmetDuration-e})).values()}}function*u(e){const{powerUp:{x:t,y:a}}=e,l=h.getNextId("score");yield w.put({type:"ADD_SCORE",score:f.ScoreRecord({scoreId:l,score:500,x:t,y:a})}),yield g.nonPauseDelay(h.frame(48)),yield w.put({type:"REMOVE_SCORE",scoreId:l})}function*b(e){if(e.targetTank.withPowerUp){if("HURT"===e.type)yield w.put({type:"REMOVE_POWER_UP_PROPERTY",tankId:e.targetTank.tankId});else if("grenade"===e.method)return;const t=P.sample(m.POWER_UP_NAMES),a=P.sample((yield w.select(_.validPowerUpSpawnPositions)));yield*y.default(f.PowerUpRecord({powerUpId:h.getNextId("power-up"),powerUpName:t,visible:!0,x:a.x,y:a.y}))}}function*E({tank:e}){"ai"===e.side&&e.withPowerUp&&(yield w.put({type:"CLEAR_ALL_POWER_UPS"}))}var c=Math.floor;Object.defineProperty(t,"__esModule",{value:!0});const P=a(16),w=a(9),f=a(10),g=a(18),y=a(354),m=a(1),h=a(5),_=a(33),I=a(41),R=(e)=>(t)=>"PICK_POWER_UP"===t.type&&t.powerUp.powerUpName===e;t.default=function*(){yield w.takeEvery("START_SPAWN_TANK",E),yield w.takeEvery(["HURT","KILL"],b),yield w.takeEvery("PICK_POWER_UP",u),yield w.takeLatest(R("shovel"),r),yield w.takeLatest(R("timer"),d),yield w.takeEvery(R("grenade"),i),yield w.takeEvery(R("star"),W),yield w.takeEvery(R("tank"),o),yield w.takeEvery(R("helmet"),s),yield w.fork(p)}},354:function(e,t,a){"use strict";function*l(e){for(let t=!0;;)yield d.nonPauseDelay(r.frame(8)),t=!t,yield n.put({type:"ADD_OR_UPDATE_POWER_UP",powerUp:e.set("visible",t)})}Object.defineProperty(t,"__esModule",{value:!0});const n=a(9),r=a(5),d=a(18);t.default=function*(e){const t=yield n.fork(l,e);yield n.put({type:"ADD_OR_UPDATE_POWER_UP",powerUp:e}),yield n.race({picked:n.take((t)=>"PICK_POWER_UP"===t.type&&t.powerUp.powerUpId===e.powerUpId),stageChanged:n.take("START_STAGE"),cleared:n.take("CLEAR_ALL_POWER_UPS")}),t.cancel(),yield n.put({type:"REMOVE_POWER_UP",powerUpId:e.powerUpId})}},355:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(11),r=a(1),d=a(356),i=a(93),W=a(94),o=a(95),s=a(363),p=a(364),u=a(367),b=()=>l.createElement("div",{style:{maxWidth:200,marginLeft:20}},l.createElement("p",null,"\u5F53\u524D\u7248\u672C ","0.1.5"),l.createElement("p",null,"\u7F16\u8BD1\u65F6\u95F4 ","2017-12-15 13:27:39"),l.createElement("p",null,"\u6E38\u620F\u4ECD\u5728\u5F00\u53D1\u4E2D\uFF0C\u76EE\u524D\u53EA\u652F\u6301\u5355\u4EBA\u8FDB\u884C\u6E38\u620F\u3002 \u76EE\u524D\u6E38\u620F\u4ECD\u6709\u5F88\u591ABUG\uFF0C\u8BF7\u89C1\u8C05\u3002 \u8BF7\u4F7F\u7528\u6700\u65B0\u7684chrome\u6D4F\u89C8\u5668\u3002 \u6574\u4E2A\u6E38\u620F\u90FD\u4F7F\u7528\u4E86\u77E2\u91CF\u56FE\uFF0C\u53EF\u4EE5\u9002\u5F53\u653E\u5927\u6D4F\u89C8\u5668\u7684\u7F29\u653E\u6BD4\u4F8B\u3002"),l.createElement("p",null,"WASD \u63A7\u5236\u5766\u514B\u65B9\u5411"),l.createElement("p",null,"J \u63A7\u5236\u5F00\u706B"),l.createElement("p",null,"\u4F7F\u7528",l.createElement("a",{href:"./editor.html",target:"_blank"},"\u7F16\u8F91\u5668"),"\u521B\u5EFA\u81EA\u5DF1\u559C\u6B22\u7684\u5730\u56FE"),l.createElement("p",null,"\u5728",l.createElement("a",{href:"./stories.html",target:"_blank"},"stories\u9875\u9762"),"\u6D4F\u89C8\u6E38\u620F\u4E2D\u7684\u7EC4\u4EF6/\u7D20\u6750"),l.createElement("p",null,"STAR ME ON ",l.createElement("a",{href:"https://github.com/shinima/battle-city"},"GitHub"))),E=2,c=16*r.BLOCK_SIZE,P=15*r.BLOCK_SIZE;class y extends l.PureComponent{render(){const{scene:e,paused:t}=this.props;return l.createElement("div",{style:{display:"flex"}},l.createElement("svg",{className:"svg",style:{background:"#757575"},width:c*E,height:P*E,viewBox:`0 0 ${c} ${P}`},"game-title"===e?l.createElement(o.default,null):null,"game"===e?l.createElement(d.default,null):null,"gameover"===e?l.createElement(i.default,null):null,"statistics"===e?l.createElement(W.default,null):null,l.createElement(p.default,null),t?l.createElement(s.default,null):null),l.createElement(b,null),l.createElement(u.default,null))}}t.default=n.connect(function(e){return{scene:e.game.scene,paused:e.game.paused}})(y)},356:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(11),r=a(16),d=a(1),i=a(25),W=a(78),o=a(81),s=a(82),p=a(83),u=a(84),b=a(86),E=a(87),c=a(88),P=a(89),y=a(90),w=a(359),f=a(360),g=a(91),m=a(92),h=a(361);class _ extends l.Component{render(){const{bullets:e,map:t,explosions:a,flickers:n,tanks:r,texts:_,powerUps:I,scores:R}=this.props,{bricks:k,steels:x,rivers:S,snows:T,forests:L,eagle:C,restrictedAreas:v}=t.toObject(),O=r.filter((e)=>e.active);return l.createElement("g",{role:"game-scene"},l.createElement(W.default,null),l.createElement("g",{role:"battle-field",transform:`translate(${d.BLOCK_SIZE},${d.BLOCK_SIZE})`},l.createElement("rect",{width:13*d.BLOCK_SIZE,height:13*d.BLOCK_SIZE,fill:"#000000"}),l.createElement(u.default,{rivers:S}),l.createElement(p.default,{steels:x}),l.createElement(s.default,{bricks:k}),l.createElement(b.default,{snows:T}),C?l.createElement(c.default,{x:C.x,y:C.y,broken:C.broken}):null,l.createElement("g",{role:"bullet-layer"},e.map((e,t)=>l.createElement(o.default,{key:t,bullet:e})).toArray()),l.createElement("g",{role:"tank-layer"},O.map((e)=>l.createElement(i.Tank,{key:e.tankId,tank:e})).toArray()),l.createElement("g",{role:"helmet-layer"},O.map((e)=>0<e.helmetDuration?l.createElement(w.default,{key:e.tankId,x:e.x,y:e.y}):null).toArray()),l.createElement(E.default,{forests:L}),l.createElement(h.default,{areas:v}),l.createElement("g",{role:"power-up-layer"},I.map((e)=>l.createElement(g.default,{key:e.powerUpId,powerUp:e})).toArray()),l.createElement("g",{role:"explosion-layer"},a.map((e)=>l.createElement(P.default,{key:e.explosionId,explosion:e})).toArray()),l.createElement("g",{role:"flicker-layer"},n.map((e)=>l.createElement(y.default,{key:e.flickerId,flicker:e})).toArray()),l.createElement("g",{role:"score-layer"},R.map((e)=>l.createElement(m.default,{key:e.scoreId,score:e.score,x:e.x,y:e.y})).toArray())),l.createElement(f.default,{texts:_}))}}t.default=n.connect(r.identity)(_)},359:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(5),r=a(85);class d extends l.PureComponent{render(){const{x:e,y:t,tickIndex:a}=this.props,n=["M0,8 v-2 h1 v-1 h1 v-1 h2 v-2 h1 v-1 h1 v-1 h2 v1 h-2 v1 h-1 v2 h-1 v1 h-2 v1 h-1 v2 h-1","M0,2 h1 v-1 h1 v-1 h2 v1 h1 v1 h2 v1 h1 v1 h-1 v-1 h-2 v-1 h-1 v-1 h-2 v1 h-1 v2 h1 v1 h1 v2 h1 v1 h-1 v-1 h-1 v-2 h-1 v-1 h-1 v-2"];return l.createElement("g",{role:"tank-helmet",transform:`translate(${e}, ${t})`,fill:"white"},l.createElement("path",{d:n[a]}),l.createElement("path",{transform:"translate(16,0)rotate(90)",d:n[a]}),l.createElement("path",{transform:"translate(16, 16)rotate(180)",d:n[a]}),l.createElement("path",{transform:"translate(0, 16)rotate(270)",d:n[a]}))}}t.default=r.default(n.frame(2),n.frame(2))(d)},360:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(12);class r extends l.PureComponent{render(){const{texts:e}=this.props;return l.createElement("g",{role:"text-layer"},e.map((e)=>l.createElement(n.default,{key:e.textId,content:e.content,fill:e.fill,x:e.x,y:e.y})).toArray())}}t.default=r},361:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a(0);!1,t.default=()=>null},363:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(12),r=a(1);class d extends l.PureComponent{constructor(){super(...arguments),this.handle=null,this.state={visible:!0}}componentDidMount(){this.handle=setInterval(()=>this.setState({visible:!this.state.visible}),250)}componentWillUnmount(){clearInterval(this.handle)}render(){return l.createElement("g",{role:"pause-indicator"},l.createElement(n.default,{content:"pause",x:6.25*r.BLOCK_SIZE,y:8*r.BLOCK_SIZE,fill:"#db2b00",style:{visibility:this.state.visible?"visible":"hidden"}}))}}t.default=d},364:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(11),r=a(365);class d extends l.PureComponent{render(){const{stageEnterCurtainT:e,comingStageName:a}=this.props;return l.createElement(r.default,{content:`stage  ${a}`,t:e})}}t.default=n.connect(function(e){return{stageEnterCurtainT:e.game.stageEnterCurtainT,comingStageName:e.game.comingStageName}})(d)},365:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(1),r=a(366),d=a(12);class i extends l.PureComponent{render(){const{t:e,content:a}=this.props;return l.createElement(r.default,{name:"stage-enter/exit",t:e,x:n.BLOCK_SIZE,y:n.BLOCK_SIZE,width:13*n.BLOCK_SIZE,height:13*n.BLOCK_SIZE},l.createElement("rect",{width:13*n.BLOCK_SIZE,height:13*n.BLOCK_SIZE,fill:"#757575"}),l.createElement(d.default,{content:a,x:5*n.BLOCK_SIZE,y:6*n.BLOCK_SIZE,fill:"black"}))}}t.default=i},366:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0);class n extends l.PureComponent{render(){const{name:e,children:a,t:n,x:d=0,y:i=0,width:t,height:r}=this.props;return l.createElement("g",{role:`curtain-${e}`,transform:`translate(${d}, ${i})`},l.createElement("defs",null,l.createElement("clipPath",{id:"default-curtain"},l.createElement("rect",{x:0,y:0,width:t,height:r/2*n}),l.createElement("rect",{x:0,y:r*(1-n/2),width:t,height:r/2*n}))),l.createElement("g",{clipPath:"url(#default-curtain)"},a))}}t.default=n},367:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(11),r=a(16);t.default=()=>null},41:function(e,t,a){"use strict";var l=Math.max,n=Math.min,r=Math.floor;Object.defineProperty(t,"__esModule",{value:!0});const d=a(1),i=a(16);class W{static resolveN(e){let t;return t="brick"===e?d.N_MAP.BRICK:"steel"===e?d.N_MAP.STEEL:"river"===e?d.N_MAP.RIVER:"snow"===e?d.N_MAP.SNOW:d.N_MAP.FOREST,t}static resolveItemSize(e){return"brick"===e?d.ITEM_SIZE_MAP.BRICK:"steel"===e?d.ITEM_SIZE_MAP.STEEL:"river"===e?d.ITEM_SIZE_MAP.RIVER:"snow"===e?d.ITEM_SIZE_MAP.SNOW:d.ITEM_SIZE_MAP.FOREST}static getT(e,t,a){const l=W.resolveN(e);return t*l+a}static getRowCol(e,a){const t=W.resolveN(e);return[r(a/t),a%t]}static getPos(e,a){const t=W.resolveItemSize(e),[l,n]=W.getRowCol(e,a);return{x:n*t,y:l*t}}static getRect(e,a){const t=W.resolveItemSize(e),[l,n]=W.getRowCol(e,a);return{x:n*t,y:l*t,width:t,height:t}}static*iterRowCol(e,t,a="down"){const d=W.resolveN(e),o=W.resolveItemSize(e),s=l(0,r(t.x/o)),p=n(d-1,r((t.x+t.width)/o)),u=l(0,r(t.y/o)),b=n(d-1,r((t.y+t.height)/o));if("down"===a)for(const e of i.range(u,b+1))for(const t of i.range(s,p+1))yield[e,t];else if("up"===a)for(const e of i.range(b,u-1,-1))for(const t of i.range(s,p+1))yield[e,t];else if("right"===a)for(const e of i.range(s,p+1))for(const t of i.range(u,b+1))yield[t,e];else for(const e of i.range(p,s-1,-1))for(const t of i.range(u,b+1))yield[t,e]}static*iter(e,t,a="down"){const l=W.resolveN(e);for(const[n,r]of W.iterRowCol(e,t,a))yield n*l+r}}t.default=W},78:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(11),r=a(79),d=a(80),i=a(12),W=a(1);class o extends l.PureComponent{renderPlayer1Info(){const{players:e}=this.props,t=e.get("player-1");if(null==t)return null;else{const e=`translate(${14.5*W.BLOCK_SIZE},${7.5*W.BLOCK_SIZE})`;return l.createElement("g",{role:"player-1-info",transform:e},l.createElement(i.default,{x:0,y:0,content:"\u2160P",fill:"#000000"}),l.createElement(d.PlayerTankThumbnail,{x:0,y:0.5*W.BLOCK_SIZE}),l.createElement(i.default,{x:0.5*W.BLOCK_SIZE,y:0.5*W.BLOCK_SIZE,content:t.lives+"",fill:"#000000"}))}}renderPlayer2Info(){const{players:e}=this.props,t=e.get("player-2");if(null==t)return null;else{const e=`translate(${14.5*W.BLOCK_SIZE},${8.5*W.BLOCK_SIZE})`;return l.createElement("g",{role:"player-2-info",transform:e},l.createElement(i.default,{x:0,y:0,content:"\u2161P",fill:"#000000"}),l.createElement(d.PlayerTankThumbnail,{x:0,y:0.5*W.BLOCK_SIZE}),l.createElement(i.default,{x:0.5*W.BLOCK_SIZE,y:0.5*W.BLOCK_SIZE,content:t.lives+"",fill:"#000000"}))}}render(){const{remainingEnemyCount:e,show:t}=this.props;return l.createElement("g",{role:"HUD",display:t?"inline":"none"},l.createElement(r.default,{count:e}),this.renderPlayer1Info(),this.renderPlayer2Info())}}t.default=n.connect(function(e){return{remainingEnemyCount:e.game.remainingEnemies.size,players:e.players,show:e.game.showHUD}})(o)},79:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(16),r=a(1),d=({x:e,y:t})=>l.createElement("g",{transform:`translate(${e},${t})`,fill:"#00000"},l.createElement("rect",{x:1,y:1,width:1,height:6}),l.createElement("rect",{x:7,y:1,width:1,height:6}),l.createElement("rect",{x:2,y:3,width:5,height:2}),l.createElement("rect",{x:3,y:2,width:3,height:4}),l.createElement("rect",{x:4,y:1,width:1,height:6}),l.createElement("rect",{x:3,y:7,width:3,height:1}),l.createElement("rect",{x:4,y:3,width:1,height:2,fill:"#6B0800"})),i=`translate(${1.5*r.BLOCK_SIZE+r.FIELD_SIZE}, ${1.5*r.BLOCK_SIZE})`;class W extends l.PureComponent{render(){const{count:e}=this.props;return l.createElement("g",{role:"remaining-enemy-count-indicator",transform:i},n.range(e).map((e)=>l.createElement(d,{key:e,x:8*(e%2),y:8*Math.floor(e/2)})))}}t.default=W},80:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0);class n extends l.PureComponent{render(){const{x:e,y:t}=this.props;return l.createElement("path",{role:"player-tank-thumbnail",transform:`translate(${e},${t})`,fill:"#9c4a00",d:"M1,1 h1 v2 h1 v-1 h1 v-1 h-1 v-1 h3 v1 h-1 v1 h1 v1 h1 v-2 h1 v7 h-1 v-2 h-1 v-2 h-1 v-1 h-1 v1 h-1 v1 h1 v1 h1 v-1 h1 v2 h-1 v1 h-1 v-1 h-1 v-1 h-1 v2 h-1 v-7"})}}t.PlayerTankThumbnail=n},81:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(19),r="#ADADAD";t.default=({bullet:e})=>{const{direction:t,x:a,y:d}=e;let i=null;return i="up"===t?l.createElement(n.Pixel,{x:1,y:-1,fill:r}):"down"===t?l.createElement(n.Pixel,{x:1,y:3,fill:r}):"left"===t?l.createElement(n.Pixel,{x:-1,y:1,fill:r}):l.createElement(n.Pixel,{x:3,y:1,fill:r}),l.createElement("g",{role:"bullet",transform:`translate(${a},${d})`},l.createElement("rect",{width:3,height:3,fill:r}),i)}},89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(19),r={" ":"none",W:"#fffffe",P:"#590d79",R:"#b53121"},d={s0:["                ","                ","       W     W  ","   W   W  W W   ","   PWW PW WWP   ","    PPWWPPWP    ","     PWRWRWPWW  ","   WWWPWR RPP   ","     PW RRWP    ","     WWRWPRWP   ","    WP WPWWPWP  ","   WP PW PW  W  ","      W   P     ","                ","                "],s1:["                ","      P   W     "," W  P WP WP   W "," PWW  PW WP WWP ","  PPWPPWWWPWPP  ","   PWRWWWPRWW P "," P  PWR RWWPP   ","   WWWWRRR PWWW ","WW WPW RR WWPP  ","  PPWWPRRRWPP P ","    WRWP PWRW   ","  P PWRWWWRPWW  ","   PWPWPPWW PPW ","   WPPWP PW   P ","  WP  W P PP    ","                "],s2:["    P P    P  P "," W   W  W P  WP "," PPWW  WW   WP  ","  PPWPPWPP WWP  ","   PRWWWWPWWPP P"," W PWWRW WWRP   ","WWWW WR  RWWWWWW"," PPPWWPR RWPPP  ","   PPP WR PPWW  "," WPPWWPW WRWPPW ","  WWWRWPWPWW    "," PWPPWPWWPPWW P "," WP  P PWP PPW  ","WP  P   W    PW ","        W P   P "],b0:["                                ","                     W       W  ","  W       W          W       W  ","   W  W  W   PPP WWP  W     W   ","    P  W   WWWPPPWWPP W W  P    ","     W P  WPWWW W  WPPW W WW    ","      W   WWPW WPPP WWWW W      ","    WW   WWWWWWWWWPWWWWWW W     ","       PPPW  WWWPWWPWW PW    PW ","      WPPPWWWWWPWW WW WWPW   W  ","P    WW WPWWWRWWRWWWPWWWPWWW    "," WP PW WWWRRWWWWRPWWWPWPW WPW   ","  W WW WWWWRRWRWRWWRRPWW WPPW   "," W   WW WPWRWRRRRRRWRWWWW WW    ","  W WPWWPPWWRWRWWRWRPWWWWW WW   ","    PP PWPWWRRWP WRWWWW W WPP   ","      WWPWRRRW WPW RW PWWW PP   ","     WWWWWWWRRWRPRRRWPPPWWWP  W ","     WW WWWWRWRRPRWWRWW WWPP   W","    PW WWPWRWWWRWRPWWWWWPPPP    ","    PPWPPPWWWWPRRWWWWPWWW P W   ","  W  PPPPWWWWPPWRWWWWWPWW WW    ","   W    PW WPPWWWW WW PW WP     ","        WW WWW WWWW  PPWWPP     ","      WP WW W PPWWWWPPWW P      ","     P W WWWWWPP  PPP W W WW    ","    W      PPPP         W  P    ","   W     W        W  W     WP   ","  P        W       PWP      WP  ","  W                W W       W  ","                                ","                                "],b1:["W                               ","PW   W             PPWW       W "," PW   P     WPPP PWWWWPP    WP  ","  PP    WW WWWP PWWW  WPP  WP   ","   PP  WPWWWRWWW WW WP WPP  P   ","   P  WWPPRPWWWWWWWWWWP WP      ","      WPWWWWPWWWWWWPPWW WP WW   ","    PPWWWWWWWWWPPWWWWPWWWPPWWP  ","    PWWWW WPPWWWWPWWWWWWPPWWPPP ","     WW  WWWWWRWWWWRWWWWPWW WPP ","   WWW WWWRWWWRRWWRRWRWPWWWW WP ","  PWWWWWWWRRRWRWRRRWRWWWWPWW WPW","  WPWW WWWR RRWPRRWRWWWWWPW WPPP","   PW PWWWWRWWR RWRWWWRWPW WPPW ","   PP PWWWWRRRRWPRRRWRWWWWWWP   "," W WWW PWRRRRRWWW WRWWWWWWPPWW  "," WWWWWWWWWWRRP WWRRRRWWWWPWWWPP ","WWWRPWWWWRWRWWRPWWR WRRRWWWWWWP ","WWWWPWWWRWWRRRR RRWRWWWWWWW WWPW","PWWPWRWWWWRRWRRWRRRRWWWWWPWW WWP","PPPPWWPPWRRPPWRRRWWRRWWPPWWWW W "," PP WWWWWWWWWWRWWWWWWRWWWPWW WPW","     WWWWWWWPWWWWWWPWWWWWWWWW WP","    WW WW WWWWWWW PP WWWWWWWPWPW","    WWW  PPWWWPWWW  WWWP WW  PWW","    WWWWWWPPWWW WWWWPWWPP  WPPW ","    PWWWWP WWWW WWWPPPWWPPPPPW  ","  W  PWPP  PPPWW PPP WRWWPPW    ","   W  PP      WWW   WWWPP    W  ","  P P     WP   WWWWWWWPPW  P P  "," W  P       W   WWPPWPPP    P W ","W          W     PPP P         P"]};class i extends l.PureComponent{render(){const{explosion:{cx:e,cy:t,shape:a,explosionId:i}}=this.props,W="s0"===a||"s1"===a||"s2"===a;return l.createElement(n.Bitmap,{x:e-(W?8:16),y:t-(W?8:16),d:d[a],scheme:r})}}t.default=i},90:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0);class n extends l.PureComponent{render(){const{flicker:{x:e,y:t,shape:a}}=this.props,n=`translate(${e},${t})`;if(0===a)return l.createElement("g",{transform:n,fill:"#ffffff"},l.createElement("rect",{x:3,y:7,width:9,height:1}),l.createElement("rect",{x:6,y:6,width:3,height:3}),l.createElement("rect",{x:7,y:3,width:1,height:9}));if(1===a)return l.createElement("g",{transform:n,fill:"#ffffff"},l.createElement("rect",{x:2,y:7,width:11,height:1}),l.createElement("rect",{x:5,y:6,width:5,height:3}),l.createElement("rect",{x:6,y:5,width:3,height:5}),l.createElement("rect",{x:7,y:2,width:1,height:11}));if(2===a)return l.createElement("g",{transform:n,fill:"#ffffff"},l.createElement("rect",{x:1,y:7,width:13,height:1}),l.createElement("rect",{x:4,y:6,width:7,height:3}),l.createElement("rect",{x:6,y:4,width:3,height:7}),l.createElement("rect",{x:7,y:1,width:1,height:13}));if(3===a)return l.createElement("g",{transform:n,fill:"#ffffff"},l.createElement("rect",{x:0,y:7,width:15,height:1}),l.createElement("rect",{x:3,y:6,width:9,height:3}),l.createElement("rect",{x:5,y:5,width:5,height:5}),l.createElement("rect",{x:6,y:3,width:3,height:9}),l.createElement("rect",{x:7,y:0,width:1,height:15}));throw new Error(`Invalid tickIndex: ${a}`)}}t.default=n},91:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(19),r={" ":"none",w:"#FFFFFF",g:"#ADADAD",b:"#00424A"},d={tank:[" wwwwwwwwwwwwwg ","w             wb","w bbbbbbbbbbbbwb","w bbbbbwgg bbbwb","w bwwwwgggb bbwb","w b    gggb bbwb","w bbbwggbbgb bwb","w bbwgggggbb bwb","w bgbg      g wb","w bggwwwwgggb wb","w b w w w wbg wb","w bb ggggggg bwb","w bbb       bbwb","gwwwwwwwwwwwwwwg"," bbbbbbbbbbbbbb ","                "],star:[" wwwwwwwwwwwwwg ","w             wb","w bbbbbw bbbbbwb","w bbbbwwg bbbbwb","w bbbbwwg bbbbwb","w wwwwwggwwww wb","w bgggwgwggg  wb","w bbgwwwwgg  wwb","w bbwwggwwg bbwb","w bgwgg ggwg bwb","w bwgg   ggw bwb","w bg   bb  g bwb","w b  bbbbbb  bwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "],grenade:[" wwwwwwwwwwwwwg ","w             wb","w bbbwwwgg bbbwb","w bbbwgb  g bbwb","w bbwgggb  g bwb","w bwgbwgbg g bwb","w bg g  g  g bwb","w bwgbwgbg g bwb","w bg g  g  g bwb","w bwgbwgbg g bwb","w bbgb  g bbbbwb","w bbbwgg bbbbbwb","w bbb   bbbbbbwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "],timer:[" wwwwwwwwwwwwwg ","w             wb","w bbbbwgwg bbbwb","w bbbbg   wg bwb","w bbbgggg    bwb","w bbgwwwwg bbbwb","w bgwwbwwwg bbwb","w bgwwbwwwg bbwb","w bgwwwbwwg bbwb","w b gwwwwg bbbwb","w bb gggg bbbbwb","w bbb    bbbbbwb","w bbbbbbbbbbbbwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "],helmet:[" wwwwwwwwwwwwwg ","w             wb","w bbbbbbbbbbbbwb","w bbbbbbbbbbbbwb","w bbbwwwgg bbbwb","w bbwwggggg bbwb","w bbwgggggg bbwb","w bbggggggg bbwb","w bgggggggg bbwb","w b     gggg bwb","w bbbbbb     bwb","w bbbbbbbbbbbbwb","w bbbbbbbbbbbbwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "],shovel:[" wwwwwwwwwwwwwg ","w             wb","w bbbbbbbbwbbbwb","w bbbbbbbbwgbbwb","w bbbbbbbbgggbwb","w bbbbbbbw   bwb","w bbbwbbw bbbbwb","w bbwwgw bbbbbwb","w bwwgbw bbbbbwb","w bwgbggg bbbbwb","w bggggg bbbbbwb","w bgggg bbbbbbwb","w b    bbbbbbbwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "]};class i extends l.PureComponent{render(){const{powerUp:{visible:e,x:t,y:a,powerUpName:i}}=this.props;return l.createElement(n.Bitmap,{style:{visibility:e?"visible":"hidden"},x:t,y:a,d:d[i],scheme:r})}}t.default=i},92:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=({x:e,y:t})=>l.createElement("g",{role:"zero",transform:`translate(${e}, ${t})`},l.createElement("rect",{x:"1",y:"0",width:"2",height:"1"}),l.createElement("rect",{x:"1",y:"6",width:"2",height:"1"}),l.createElement("rect",{x:"0",y:"1",width:"1",height:"5"}),l.createElement("rect",{x:"3",y:"1",width:"1",height:"5"})),r=({x:e,y:t})=>l.createElement("g",{role:"one",transform:`translate(${e}, ${t})`},l.createElement("rect",{x:"1",y:"1",width:"1",height:"1"}),l.createElement("rect",{x:"1",y:"6",width:"3",height:"1"}),l.createElement("rect",{x:"2",y:"0",width:"1",height:"7"})),d=({x:e,y:t})=>l.createElement("g",{role:"two",transform:`translate(${e}, ${t})`},l.createElement("rect",{x:"0",y:"1",width:"1",height:"1"}),l.createElement("rect",{x:"1",y:"0",width:"2",height:"1"}),l.createElement("rect",{x:"3",y:"1",width:"1",height:"2"}),l.createElement("rect",{x:"2",y:"3",width:"1",height:"1"}),l.createElement("rect",{x:"1",y:"4",width:"1",height:"1"}),l.createElement("rect",{x:"0",y:"5",width:"1",height:"1"}),l.createElement("rect",{x:"0",y:"6",width:"4",height:"1"})),i=({x:e,y:t})=>l.createElement("path",{role:"three",d:`M${e},${t+1} h1 v-1 h2 v1 h1 v2 h-1 v1 h1 v2 h-1 v1 h-2 v-1 h-1 v-1 h1 v1 h2 v-2 h-2 v-1 h2 v-2 h-2 v1 h-1 v-1`}),W=({x:e,y:t})=>l.createElement("path",{role:"four",d:`M${e+1},${t+2} v-1 h1 v-1 h1 v4 h-1 v-2 h-1 v2 h3 v1 h-1 v2 h-1 v-2 h-2 v-3 h1`}),o=({x:e,y:t})=>l.createElement("path",{role:"five",d:`M${e},${t} h4 v1 h-3 v1 h2 v1 h1 v3 h-1 v1 h-2 v-1 h-1 v-1 h1 v1 h2 v-3 h-3 v-3`});class s extends l.PureComponent{render(){const{score:e,x:t=0,y:a=0}=this.props;let s;if(100===e)s=r;else if(200===e)s=d;else if(300===e)s=i;else if(400===e)s=W;else if(500===e)s=o;else throw new Error(`Invalid score: ${e}`);return l.createElement("g",{transform:`translate(${t},${a})`,fill:"white"},l.createElement(s,{x:1,y:4}),l.createElement(n,{x:6,y:4}),l.createElement(n,{x:11,y:4}))}}t.default=s},93:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(1),r=a(34),d=a(12);class i extends l.PureComponent{render(){const e=n.ITEM_SIZE_MAP.BRICK,t=4;return l.createElement("g",{role:"gameover-scene"},l.createElement("defs",null,l.createElement("pattern",{id:"pattern-brickwall",width:2*e/t,height:2*e/t,patternUnits:"userSpaceOnUse"},l.createElement("g",{transform:`scale(${1/t})`},l.createElement(r.default,{x:0,y:0}),l.createElement(r.default,{x:0,y:e}),l.createElement(r.default,{x:e,y:0}),l.createElement(r.default,{x:e,y:e})))),l.createElement("rect",{fill:"#000000",x:0,y:0,width:16*n.BLOCK_SIZE,height:15*n.BLOCK_SIZE}),l.createElement("g",{transform:`scale(${t})`},l.createElement(d.default,{content:"game",x:4*n.BLOCK_SIZE/t,y:4*n.BLOCK_SIZE/t,fill:"url(#pattern-brickwall)"}),l.createElement(d.default,{content:"over",x:4*n.BLOCK_SIZE/t,y:7*n.BLOCK_SIZE/t,fill:"url(#pattern-brickwall)"})))}}t.default=i},94:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(11),r=a(12),d=a(25),i=a(1),W=a(10);class o extends l.PureComponent{render(){const{transientKillInfo:e,stageName:t,showTotalKillCount:a}=this.props,n=e.get("player-1"),o=n.get("basic"),s=-1===o?"  ":(o+"").padStart(2),p=-1===o?"    ":(100*o+"").padStart(4),u=n.get("fast"),b=-1===u?"  ":(u+"").padStart(2),E=-1===u?"    ":(200*u+"").padStart(4),c=n.get("power"),P=-1===c?"  ":(c+"").padStart(2),y=-1===c?"    ":(300*c+"").padStart(4),w=n.get("armor"),f=-1===w?"  ":(w+"").padStart(2),g=-1===w?"    ":(400*w+"").padStart(4);let m="  ";if(a){const e=(-1===o?0:o)+(-1===u?0:u)+(-1===c?0:c)+(-1===w?0:w);m=(e+"").padStart(2)}return l.createElement("g",{role:"statistics-scene"},l.createElement("rect",{fill:"#000000",x:0,y:0,width:16*i.BLOCK_SIZE,height:16*i.BLOCK_SIZE}),l.createElement("g",{transform:`translate(${-0.5*i.BLOCK_SIZE}, ${-1.5*i.BLOCK_SIZE})`},l.createElement(r.default,{content:"HI-SCORE",x:4.5*i.BLOCK_SIZE,y:3.5*i.BLOCK_SIZE,fill:"#e44437"}),l.createElement(r.default,{content:"20000",x:10*i.BLOCK_SIZE,y:3.5*i.BLOCK_SIZE,fill:"#feac4e"}),l.createElement(r.default,{content:`STAGE  ${t}`,x:6.5*i.BLOCK_SIZE,y:4.5*i.BLOCK_SIZE,fill:"#ffffff"}),l.createElement(d.Tank,{tank:W.TankRecord({x:8*i.BLOCK_SIZE,y:7.7*i.BLOCK_SIZE,side:"ai",level:"basic"})}),l.createElement(d.Tank,{tank:W.TankRecord({x:8*i.BLOCK_SIZE,y:9.2*i.BLOCK_SIZE,side:"ai",level:"fast"})}),l.createElement(d.Tank,{tank:W.TankRecord({x:8*i.BLOCK_SIZE,y:10.7*i.BLOCK_SIZE,side:"ai",level:"power"})}),l.createElement(d.Tank,{tank:W.TankRecord({x:8*i.BLOCK_SIZE,y:12.2*i.BLOCK_SIZE,side:"ai",level:"armor"})}),l.createElement("rect",{x:6.5*i.BLOCK_SIZE,y:13.3*i.BLOCK_SIZE,width:4*i.BLOCK_SIZE,height:2,fill:"white"}),l.createElement(r.default,{content:"\u2160-PLAYER",x:2*i.BLOCK_SIZE,y:5.5*i.BLOCK_SIZE,fill:"#e44437"}),l.createElement(r.default,{content:"3200",x:4*i.BLOCK_SIZE,y:6.5*i.BLOCK_SIZE,fill:"#feac4e"}),l.createElement(r.default,{content:`${p} PTS ${s}\u2190`,x:2*i.BLOCK_SIZE,y:8*i.BLOCK_SIZE,fill:"white"}),l.createElement(r.default,{content:`${E} PTS ${b}\u2190`,x:2*i.BLOCK_SIZE,y:9.5*i.BLOCK_SIZE,fill:"white"}),l.createElement(r.default,{content:`${y} PTS ${P}\u2190`,x:2*i.BLOCK_SIZE,y:11*i.BLOCK_SIZE,fill:"white"}),l.createElement(r.default,{content:`${g} PTS ${f}\u2190`,x:2*i.BLOCK_SIZE,y:12.5*i.BLOCK_SIZE,fill:"white"}),l.createElement(r.default,{content:`TOTAL ${m}`,x:3.5*i.BLOCK_SIZE,y:13.5*i.BLOCK_SIZE,fill:"white"})))}}t.default=n.connect(function({game:{transientKillInfo:e,currentStage:t,showTotalKillCount:a}}){return{transientKillInfo:e,stageName:t,showTotalKillCount:a}})(o)},95:function(e,t,a){"use strict";function l(e){return"1-player"===e?8.25*u.BLOCK_SIZE:"2-players"===e?9.25*u.BLOCK_SIZE:10.25*u.BLOCK_SIZE}function n(e){return"1-player"===e?"2-players":"2-players"===e?"editor":"1-player"}function r(e){return"1-player"===e?"editor":"2-players"===e?"1-player":"2-players"}Object.defineProperty(t,"__esModule",{value:!0});const d=a(0),i=a(11),W=a(34),o=a(12),s=a(96),p=a(25),u=a(1),b=a(10);class E extends d.PureComponent{constructor(){super(...arguments),this.state={choice:"1-player"},this.handleKeyPress=(e)=>{const{dispatch:t}=this.props,{choice:a}=this.state,l=u.CONTROL_CONFIG.player1;e.key===l.down?this.setState({choice:n(a)}):e.key===l.up?this.setState({choice:r(a)}):e.key===l.fire&&"1-player"===a&&t({type:"GAMESTART"})}}componentDidMount(){document.addEventListener("keypress",this.handleKeyPress)}componentWillUnmount(){document.removeEventListener("keypress",this.handleKeyPress)}render(){const e=u.ITEM_SIZE_MAP.BRICK,t=4,{choice:a}=this.state;return d.createElement("g",{role:"game-title-scene"},d.createElement("defs",null,d.createElement("pattern",{id:"pattern-brickwall",width:2*e/t,height:2*e/t,patternUnits:"userSpaceOnUse"},d.createElement("g",{transform:`scale(${1/t})`},d.createElement(W.default,{x:0,y:0}),d.createElement(W.default,{x:0,y:e}),d.createElement(W.default,{x:e,y:0}),d.createElement(W.default,{x:e,y:e})))),d.createElement("rect",{fill:"#000000",width:16*u.BLOCK_SIZE,height:15*u.BLOCK_SIZE}),d.createElement("g",{transform:"scale(0.5)"},d.createElement(s.default,{textFill:"#607d8b",x:22*u.BLOCK_SIZE,y:u.BLOCK_SIZE,content:"star me on github",onClick:()=>window.open("https://github.com/shinima/battle-city")})),d.createElement(o.default,{content:"\u2160-    00 HI- 20000",x:1*u.BLOCK_SIZE,y:1.5*u.BLOCK_SIZE}),d.createElement("g",{transform:`scale(${t})`},d.createElement(o.default,{content:"battle",x:1.5*u.BLOCK_SIZE/t,y:3*u.BLOCK_SIZE/t,fill:"url(#pattern-brickwall)"}),d.createElement(o.default,{content:"city",x:3.5*u.BLOCK_SIZE/t+1,y:5.5*u.BLOCK_SIZE/t,fill:"url(#pattern-brickwall)"})),d.createElement(o.default,{content:"1 player",x:5.5*u.BLOCK_SIZE,y:8.5*u.BLOCK_SIZE,fill:"white"}),d.createElement(o.default,{content:"2 players",x:5.5*u.BLOCK_SIZE,y:9.5*u.BLOCK_SIZE,fill:"white"}),d.createElement(o.default,{content:"editor",x:5.5*u.BLOCK_SIZE,y:10.5*u.BLOCK_SIZE,fill:"white"}),d.createElement(p.Tank,{tank:b.TankRecord({side:"human",direction:"right",color:"yellow",moving:!0,x:4*u.BLOCK_SIZE,y:l(a)})}),d.createElement(o.default,{content:"\xA9 1980 1985 NAMCO LTD.",x:2*u.BLOCK_SIZE,y:12.5*u.BLOCK_SIZE}),d.createElement(o.default,{content:"ALL RIGHTS RESERVED",x:3*u.BLOCK_SIZE,y:13.5*u.BLOCK_SIZE}))}}t.default=i.connect(void 0)(E)}},[159]);