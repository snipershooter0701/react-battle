webpackJsonp([2],{369:function(a,b,c){"use strict";function d(a){return"basic"===a.tankLevel?a.set("tankLevel","fast"):"fast"===a.tankLevel?a.set("tankLevel","power"):a.set("tankLevel","armor")}function e(a){return"armor"===a.tankLevel?a.set("tankLevel","power"):"power"===a.tankLevel?a.set("tankLevel","fast"):a.set("tankLevel","basic")}function f(a){const b=[];for(let c=0;c<o.FIELD_BLOCK_SIZE;c+=1){const d=[];for(let b=0;b<o.FIELD_BLOCK_SIZE;b+=1){const{type:e,hex:f}=a.get(c*o.FIELD_BLOCK_SIZE+b);"B"===e?0<f?d.push("B"+f.toString(16)):d.push("X"):"E"===e?d.push("E"):"R"===e?d.push("R"):"S"===e?d.push("S"):"T"===e?0<f?d.push("T"+f.toString(16)):d.push("X"):"F"===e?d.push("F"):d.push("X")}b.push(d.map((a)=>a.padEnd(3)).join(""))}return b}var g=Math.floor;Object.defineProperty(b,"__esModule",{value:!0}),c(52);const h=c(370),i=c(0),j=c(53),k=c(31),l=c(40),m=c(6),n=c(11),o=c(1),p=c(82),q=c(83),r=c(84),s=c(86),u=c(87),v=c(88),w=c(12),x=c(156),y=c(157),z=c(158),t=c(25),A=c(34),B=c(155),C=c(373),D=c(96),E=c(77),F=c(50),G=c(74),H=c(76),I=c(10),J=c(5),K=k.default(),L=l.combineReducers({time:F.time,game:G.default}),M=l.createStore(L,void 0,l.applyMiddleware(K));K.run(E.default);const N=2,O=16*o.BLOCK_SIZE,P=15*o.BLOCK_SIZE;b.MapItemRecord=m.Record({type:"X",hex:15});const Q=b.MapItemRecord();b.PopupRecord=m.Record({type:"none",message:""});const R=b.PopupRecord();b.EnemyConfigRecord=m.Record({tankLevel:"basic",count:0});const S=b.EnemyConfigRecord();class T extends i.PureComponent{render(){const{t:a}=this.props,b=g(a/o.FIELD_BLOCK_SIZE),c=a%o.FIELD_BLOCK_SIZE;return i.createElement("g",{className:"dash-lines",stroke:"steelblue",strokeWidth:"0.5",strokeDasharray:"2 2"},m.Range(1,o.FIELD_BLOCK_SIZE+1).map((a)=>i.createElement("line",{key:a,x1:o.BLOCK_SIZE*a,y1:0,x2:o.BLOCK_SIZE*a,y2:P,strokeOpacity:c===a||c==a-1?1:0.3})).toArray(),m.Range(1,o.FIELD_BLOCK_SIZE+1).map((a)=>i.createElement("line",{key:a,x1:0,y1:o.BLOCK_SIZE*a,x2:O,y2:o.BLOCK_SIZE*a,strokeOpacity:b===a||b===a-1?1:0.3})).toArray())}}const U=({x:a,y:b,hex:c})=>i.createElement("g",{role:"hex-brick-wall"},[[1,0,0],[2,8,0],[4,0,8],[8,8,8]].map(([d,e,f],g)=>i.createElement("g",{key:g,style:{opacity:c&d?1:0.3},transform:`translate(${e},${f})`},i.createElement(A.default,{x:a,y:b}),i.createElement(A.default,{x:a+4,y:b}),i.createElement(A.default,{x:a,y:b+4}),i.createElement(A.default,{x:a+4,y:b+4})))),V=({x:a,y:b,hex:c})=>i.createElement("g",{role:"hex-steel-wall"},i.createElement(B.default,{x:a,y:b,gstyle:{opacity:1&c?1:0.3}}),i.createElement(B.default,{x:a+8,y:b,gstyle:{opacity:2&c?1:0.3}}),i.createElement(B.default,{x:a,y:b+8,gstyle:{opacity:4&c?1:0.3}}),i.createElement(B.default,{x:a+8,y:b+8,gstyle:{opacity:8&c?1:0.3}})),W=({x:a,y:b,width:c,height:d,onClick:e,strokeWidth:f=1,spreadX:g=2,spreadY:h=1})=>i.createElement("rect",{className:"area-button",x:a-g,y:b-h,width:c+2*g,height:d+2*h,onClick:e,stroke:"transparent",strokeWidth:f}),X=({x:a,y:b,fill:c,maxLength:d,content:e,lineSpacing:f=0.25*o.BLOCK_SIZE})=>i.createElement("g",{role:"text-with-line-wrap"},m.Range(0,Math.ceil(e.length/d)).map((g)=>i.createElement(w.default,{key:g,x:a,y:b+(0.5*o.BLOCK_SIZE+f)*g,fill:c,content:e.substring(g*d,(g+1)*d)})).toArray()),Y={X:o.BLOCK_SIZE,B:2.5*o.BLOCK_SIZE,T:4*o.BLOCK_SIZE,R:5.5*o.BLOCK_SIZE,S:7*o.BLOCK_SIZE,F:8.5*o.BLOCK_SIZE,E:10*o.BLOCK_SIZE};class Z extends i.Component{constructor(){super(...arguments),this.pressed=!1,this.resolveConfirm=null,this.resolveAlert=null,this.state={view:"config",popup:R,t:-1,map:m.Repeat(Q,o.FIELD_BLOCK_SIZE**2).toList(),itemType:"X",brickHex:15,steelHex:15,stageName:"",difficulty:1,enemies:m.List([b.EnemyConfigRecord({tankLevel:"basic",count:10}),b.EnemyConfigRecord({tankLevel:"fast",count:4}),b.EnemyConfigRecord({tankLevel:"power",count:4}),b.EnemyConfigRecord({tankLevel:"armor",count:2})])},this.onLoadFile=()=>{const a=this.input.files[0];if(null==a)return;const b=new FileReader;b.readAsText(a),b.onloadend=()=>{try{const a=JSON.parse(b.result);this.loadStateFromFileContent(a)}catch(a){this.showAlertPopup("Failed to open file.")}this.resetButton.click()}},this.onMouseDown=(a)=>{const{view:b,popup:c}=this.state;"map"===b&&"none"===c.type&&-1!==this.getT(a)&&(this.pressed=!0)},this.onMouseMove=(a)=>{const{view:b,popup:c,t:d}=this.state,e=this.getT(a);e!==d&&this.setState({t:e}),"map"===b&&"none"===c.type&&this.pressed&&this.setAsCurrentItem(e)},this.onMouseUp=(a)=>{this.pressed=!1;const{view:b,popup:c}=this.state;"map"===b&&"none"===c.type&&this.setAsCurrentItem(this.getT(a))},this.onMouseLeave=()=>{this.pressed=!1,this.setState({t:-1})},this.onChangeView=(a)=>this.setState({view:a}),this.onIncDifficulty=()=>{const{difficulty:a}=this.state;this.setState({difficulty:a+1})},this.onDecDifficulty=()=>{const{difficulty:a}=this.state;this.setState({difficulty:a-1})},this.onIncEnemyLevel=(a)=>{const{enemies:b}=this.state;this.setState({enemies:b.update(a,d)})},this.onDecEnemyLevel=(a)=>{const{enemies:b}=this.state;this.setState({enemies:b.update(a,e)})},this.onIncEnemyCount=(a)=>{const{enemies:b}=this.state;this.setState({enemies:b.updateIn([a,"count"],J.inc(1))})},this.onDecEnemyCount=(a)=>{const{enemies:b}=this.state;this.setState({enemies:b.updateIn([a,"count"],J.dec(1))})},this.onRequestLoad=()=>{this.input.click()},this.onSave=async()=>{const{map:a,stageName:b,enemies:c,difficulty:d}=this.state,e=c.map((a)=>a.count).reduce((a,b)=>a+b);if(""===b)return await this.showAlertPopup("Please enter stage name."),void this.setState({view:"config"});if(0===e)return void this.showAlertPopup("no enemy");if(20===e||(await this.showConfirmPopup("total enemy count is not 20. continue?"))){const e=a.some((a)=>"E"===a.type);if(e||(await this.showConfirmPopup("no eagle. continue?"))){const e=JSON.stringify({name:b.toLowerCase(),difficulty:d,map:f(a),enemies:c.filter((a)=>0<a.count).map((a)=>`${a.count}*${a.tankLevel}`)},null,2);h.saveAs(new Blob([e],{type:"text/plain;charset=utf-8"}),`stage-${b}.json`)}}},this.onConfirm=()=>{this.resolveConfirm(!0),this.resolveConfirm=null,this.setState({popup:R})},this.onCancel=()=>{this.resolveConfirm(!1),this.resolveConfirm=null,this.setState({popup:R})},this.onClickOkOfAlert=()=>{this.resolveAlert(),this.resolveAlert=null,this.setState({popup:R})},this.onShowHelpInfo=async()=>{await this.showAlertPopup("1. Choose an item type below."),await this.showAlertPopup("2. Click or pan in the left."),await this.showAlertPopup("3. After selecting Brick or Steel you can change the item shape")}}componentDidMount(){this.form=document.createElement("form"),this.resetButton=document.createElement("input"),this.input=document.createElement("input"),this.resetButton.type="reset",this.input.type="file",this.form.style.display="none",this.input.addEventListener("change",this.onLoadFile),this.form.appendChild(this.input),this.form.appendChild(this.resetButton),document.body.appendChild(this.form)}componentWillUnmount(){this.input.removeEventListener("change",this.onLoadFile),this.form.remove()}async loadStateFromFileContent(a){const c=a.name,d=a.difficulty,e=m.List(a.enemies.map((a)=>{const c=a.split("*");return b.EnemyConfigRecord({count:+c[0],tankLevel:c[1]})})).setSize(4).map((a)=>a?a:S),f=m.List(a.map).flatMap((a)=>{const c=a.trim().split(/ +/);return c.map((a)=>{const c=parseInt(a[1],16);return b.MapItemRecord({type:a[0],hex:isNaN(c)?0:c})})});(await this.showConfirmPopup("This will override current config and map. Continue?"))&&this.setState({stageName:c,difficulty:d,enemies:e,map:f})}getT(a){let b=0,c=0,d=this.svg;for(;d;)b+=d.scrollTop+d.clientTop,c+=d.scrollLeft+d.clientLeft,d=d.parentElement;const e=g((a.clientY+b-this.svg.clientTop)/N/o.BLOCK_SIZE),f=g((a.clientX+c-this.svg.clientLeft)/N/o.BLOCK_SIZE);return 0<=e&&e<o.FIELD_BLOCK_SIZE&&0<=f&&f<o.FIELD_BLOCK_SIZE?e*o.FIELD_BLOCK_SIZE+f:-1}getCurrentItem(){const{itemType:a,brickHex:c,steelHex:d}=this.state;return"B"===a?b.MapItemRecord({type:"B",hex:c}):"T"===a?b.MapItemRecord({type:"T",hex:d}):b.MapItemRecord({type:a})}setAsCurrentItem(a){const{map:b}=this.state,c=this.getCurrentItem();if(!(-1==a||m.is(b.get(a),c)))if("E"===c.type){const d=b.map((a)=>"E"===a.type?Q:a);this.setState({map:d.set(a,c)})}else this.setState({map:b.set(a,c)})}showAlertPopup(a){return this.setState({popup:b.PopupRecord({type:"alert",message:a})}),new Promise((a)=>{this.resolveAlert=a})}showConfirmPopup(a){return this.setState({popup:b.PopupRecord({type:"confirm",message:a})}),new Promise((a)=>{this.resolveConfirm=a})}renderItemSwitchButtons(){return i.createElement("g",{role:"item-switch-buttons"},Object.entries(Y).map(([a,b])=>i.createElement(W,{key:a,x:0.25*o.BLOCK_SIZE,y:b,width:2.5*o.BLOCK_SIZE,height:o.BLOCK_SIZE,onClick:()=>this.setState({itemType:a})})))}renderHexAdjustButtons(){const{itemType:a,brickHex:b,steelHex:c}=this.state;let d=null,e=null;return"B"===a&&(d=[1,2,4,8].map((a)=>i.createElement(W,{key:a,x:o.BLOCK_SIZE+(10&a?0.5*o.BLOCK_SIZE:0),y:2.5*o.BLOCK_SIZE+(12&a?0.5*o.BLOCK_SIZE:0),width:0.5*o.BLOCK_SIZE,height:0.5*o.BLOCK_SIZE,spreadX:0,spreadY:0,onClick:()=>this.setState({brickHex:b^a})}))),"T"===a&&(e=[1,2,4,8].map((a)=>i.createElement(W,{key:a,x:o.BLOCK_SIZE+(10&a?0.5*o.BLOCK_SIZE:0),y:4*o.BLOCK_SIZE+(12&a?0.5*o.BLOCK_SIZE:0),width:0.5*o.BLOCK_SIZE,height:0.5*o.BLOCK_SIZE,spreadX:0,spreadY:0,onClick:()=>this.setState({steelHex:c^a})}))),i.createElement("g",{role:"hex-adjust-buttons"},d,e,"B"===a?i.createElement(D.default,{content:"f",spreadX:0.125*o.BLOCK_SIZE,x:2.25*o.BLOCK_SIZE,y:2.75*o.BLOCK_SIZE,onClick:()=>this.setState({itemType:"B",brickHex:15})}):null,"T"===a?i.createElement(D.default,{content:"f",spreadX:0.125*o.BLOCK_SIZE,x:2.25*o.BLOCK_SIZE,y:4.25*o.BLOCK_SIZE,onClick:()=>this.setState({itemType:"T",steelHex:15})}):null)}renderMapView(){const{map:a,brickHex:b,steelHex:c,itemType:d,t:e}=this.state,{rivers:g,steels:h,bricks:j,snows:k,forests:l,eagle:m}=H.default(f(a));return i.createElement("g",{role:"map-view"},i.createElement("g",{role:"board"},i.createElement("rect",{width:o.FIELD_BLOCK_SIZE*o.BLOCK_SIZE,height:o.FIELD_BLOCK_SIZE*o.BLOCK_SIZE,fill:"#000000"}),i.createElement(r.default,{rivers:g}),i.createElement(q.default,{steels:h}),i.createElement(p.default,{bricks:j}),i.createElement(s.default,{snows:k}),m?i.createElement(v.default,{x:m.x,y:m.y,broken:m.broken}):null,i.createElement(u.default,{forests:l})),i.createElement(T,{t:e}),i.createElement("g",{role:"tools",transform:`translate(${13*o.BLOCK_SIZE},0)`},i.createElement(D.default,{content:"?",x:2.25*o.BLOCK_SIZE,y:0.25*o.BLOCK_SIZE,spreadX:0.05*o.BLOCK_SIZE,spreadY:0.05*o.BLOCK_SIZE,onClick:this.onShowHelpInfo}),i.createElement(w.default,{content:"\u2192",fill:"#E91E63",x:0.25*o.BLOCK_SIZE,y:0.25*o.BLOCK_SIZE+Y[d]}),i.createElement("rect",{x:o.BLOCK_SIZE,y:o.BLOCK_SIZE,width:o.BLOCK_SIZE,height:o.BLOCK_SIZE,fill:"black"}),i.createElement(U,{x:o.BLOCK_SIZE,y:2.5*o.BLOCK_SIZE,hex:b}),i.createElement(V,{x:o.BLOCK_SIZE,y:4*o.BLOCK_SIZE,hex:c}),i.createElement(x.default,{shape:0,x:o.BLOCK_SIZE,y:5.5*o.BLOCK_SIZE}),i.createElement(y.default,{x:o.BLOCK_SIZE,y:7*o.BLOCK_SIZE}),i.createElement(z.default,{x:o.BLOCK_SIZE,y:8.5*o.BLOCK_SIZE}),i.createElement(v.default,{x:o.BLOCK_SIZE,y:10*o.BLOCK_SIZE,broken:!1}),this.renderItemSwitchButtons(),this.renderHexAdjustButtons()))}renderConfigView(){const{enemies:a,difficulty:b,stageName:c,t:d}=this.state,e=a.map((a)=>a.count).reduce((a,b)=>a+b);return i.createElement("g",{role:"config-view"},i.createElement(T,{t:d}),i.createElement(w.default,{content:"name:",x:3.5*o.BLOCK_SIZE,y:1*o.BLOCK_SIZE,fill:"#ccc"}),i.createElement(C.default,{x:6.5*o.BLOCK_SIZE,y:o.BLOCK_SIZE,maxLength:12,value:c,onChange:(a)=>this.setState({stageName:a})}),i.createElement(w.default,{content:"difficulty:",x:0.5*o.BLOCK_SIZE,y:2.5*o.BLOCK_SIZE,fill:"#ccc"}),i.createElement(D.default,{content:"-",x:6.25*o.BLOCK_SIZE,y:2.5*o.BLOCK_SIZE,disabled:1===b,onClick:this.onDecDifficulty}),i.createElement(w.default,{content:b+"",x:7.25*o.BLOCK_SIZE,y:2.5*o.BLOCK_SIZE,fill:"#ccc"}),i.createElement(D.default,{content:"+",x:8.25*o.BLOCK_SIZE,y:2.5*o.BLOCK_SIZE,disabled:4===b,onClick:this.onIncDifficulty}),i.createElement(w.default,{content:"enemies:",x:2*o.BLOCK_SIZE,y:4*o.BLOCK_SIZE,fill:"#ccc"}),i.createElement("g",{role:"enemies-config",transform:`translate(${6*o.BLOCK_SIZE}, ${4*o.BLOCK_SIZE})`},a.map(({tankLevel:a,count:b},c)=>i.createElement("g",{key:c,transform:`translate(0, ${1.5*o.BLOCK_SIZE*c})`},i.createElement(D.default,{content:"\u2190",x:0.25*o.BLOCK_SIZE,y:0.25*o.BLOCK_SIZE,disabled:"basic"===a,onClick:()=>this.onDecEnemyLevel(c)}),i.createElement(t.Tank,{tank:I.TankRecord({side:"ai",level:a,x:o.BLOCK_SIZE,y:0})}),i.createElement(D.default,{content:"\u2192",x:2.25*o.BLOCK_SIZE,y:0.25*o.BLOCK_SIZE,disabled:"armor"===a,onClick:()=>this.onIncEnemyLevel(c)}),i.createElement(D.default,{content:"-",x:3.75*o.BLOCK_SIZE,y:0.25*o.BLOCK_SIZE,disabled:0===b,onClick:()=>this.onDecEnemyCount(c)}),i.createElement(w.default,{content:(b+"").padStart(2,"0"),x:4.5*o.BLOCK_SIZE,y:0.25*o.BLOCK_SIZE,fill:"#ccc"}),i.createElement(D.default,{content:"+",x:5.75*o.BLOCK_SIZE,y:0.25*o.BLOCK_SIZE,disabled:99===b,onClick:()=>this.onIncEnemyCount(c)}))),i.createElement(w.default,{content:"total:",x:0.25*o.BLOCK_SIZE,y:6*o.BLOCK_SIZE,fill:"#ccc"}),i.createElement(w.default,{content:(e+"").padStart(2,"0"),x:4.5*o.BLOCK_SIZE,y:6*o.BLOCK_SIZE,fill:"#ccc"})))}renderPopup(){const{popup:a}=this.state;return"alert"===a.type?i.createElement("g",{role:"popup-alert"},i.createElement("rect",{x:0,y:0,width:O,height:P,fill:"transparent"}),i.createElement("g",{transform:`translate(${2.5*o.BLOCK_SIZE}, ${4.5*o.BLOCK_SIZE})`},i.createElement("rect",{x:-0.5*o.BLOCK_SIZE,y:-0.5*o.BLOCK_SIZE,width:12*o.BLOCK_SIZE,height:4*o.BLOCK_SIZE,fill:"#e91e63"}),i.createElement(X,{x:0,y:0,fill:"#333",maxLength:22,content:a.message}),i.createElement(D.default,{x:9.5*o.BLOCK_SIZE,y:2.25*o.BLOCK_SIZE,textFill:"#333",content:"OK",onClick:this.onClickOkOfAlert}))):"confirm"===a.type?i.createElement("g",{role:"popup-confirm"},i.createElement("rect",{x:0,y:0,width:O,height:P,fill:"transparent"}),i.createElement("g",{transform:`translate(${2.5*o.BLOCK_SIZE}, ${4.5*o.BLOCK_SIZE})`},i.createElement("rect",{x:-0.5*o.BLOCK_SIZE,y:-0.5*o.BLOCK_SIZE,width:12*o.BLOCK_SIZE,height:4*o.BLOCK_SIZE,fill:"#e91e63"}),i.createElement(X,{x:0,y:0,fill:"#333",maxLength:22,content:a.message}),i.createElement(D.default,{x:7.5*o.BLOCK_SIZE,y:2*o.BLOCK_SIZE,textFill:"#333",content:"no",onClick:this.onCancel}),i.createElement(D.default,{x:9*o.BLOCK_SIZE,y:2*o.BLOCK_SIZE,textFill:"#333",content:"yes",onClick:this.onConfirm}))):null}render(){const{view:a}=this.state;return i.createElement("svg",{ref:(a)=>this.svg=a,className:"svg",style:{background:"#333"},width:O*N,height:P*N,viewBox:`0 0 ${O} ${P}`,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},"map"===a?this.renderMapView():null,"config"===a?this.renderConfigView():null,i.createElement("g",{role:"menu",transform:`translate(0, ${13*o.BLOCK_SIZE})`},i.createElement(D.default,{content:"config",x:0.5*o.BLOCK_SIZE,y:0.5*o.BLOCK_SIZE,selected:"config"===a,onClick:()=>this.onChangeView("config")}),i.createElement(D.default,{content:"map",x:4*o.BLOCK_SIZE,y:0.5*o.BLOCK_SIZE,selected:"map"===a,onClick:()=>this.onChangeView("map")}),i.createElement(D.default,{content:"load",x:7*o.BLOCK_SIZE,y:0.5*o.BLOCK_SIZE,onClick:this.onRequestLoad}),i.createElement(D.default,{content:"save",x:9.5*o.BLOCK_SIZE,y:0.5*o.BLOCK_SIZE,onClick:this.onSave})),this.renderPopup())}}j.render(i.createElement(n.Provider,{store:M},i.createElement(Z,null)),document.getElementById("container"))},370:function(a,b,c){var d,e=e||function(a){"use strict";if(!("undefined"==typeof a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},f=/constructor/i.test(a.HTMLElement)||a.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent),h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},i=function(a){setTimeout(function(){"string"==typeof a?c().revokeObjectURL(a):a.remove()},40000)},j=function(a,b,c){b=[].concat(b);for(var d,e=b.length;e--;)if(d=a["on"+b[e]],"function"==typeof d)try{d.call(a,c||a)}catch(a){h(a)}},k=function(a){return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a},l=function(b,h,l){l||(b=k(b));var m,n=this,o=b.type,p=o==="application/octet-stream",q=function(){j(n,["writestart","progress","write","writeend"])};return n.readyState=n.INIT,"download"in d?(m=c().createObjectURL(b),void setTimeout(function(){d.href=m,d.download=h,e(d),q(),i(m),n.readyState=n.DONE})):void function(){if((g||p&&f)&&a.FileReader){var d=new FileReader;return d.onloadend=function(){var b=g?d.result:d.result.replace(/^data:[^;]*;/,"data:attachment/file;"),c=a.open(b,"_blank");c||(a.location.href=b),b=void 0,n.readyState=n.DONE,q()},d.readAsDataURL(b),void(n.readyState=n.INIT)}if(m||(m=c().createObjectURL(b)),p)a.location.href=m;else{var e=a.open(m,"_blank");e||(a.location.href=m)}n.readyState=n.DONE,q(),i(m)}()},m=l.prototype,n=function(a,b,c){return new l(a,b||a.name||"download",c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=k(a)),navigator.msSaveOrOpenBlob(a,b)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,n)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */"undefined"!=typeof a&&a.exports?a.exports.saveAs=e:null!==c(371)&&null!==c(372)&&(d=function(){return e}.call(b,c,b,a),!(d!==void 0&&(a.exports=d)))},371:function(a){a.exports=function(){throw new Error("define cannot be used indirect")}},372:function(a,b){(function(b){a.exports=b}).call(b,{})},373:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});const d=c(0),e=c(12),f=c(1);class g extends d.Component{constructor(a){super(a),this.onFocus=()=>{this.setState({focused:!0})},this.onBlur=()=>{this.setState({focused:!1})},this.onKeyDown=(a)=>{const{value:b,onChange:c,maxLength:d}=this.props;"Backspace"===a.key?c(b.slice(0,b.length-1)):e.default.support(a.key)&&c((b+a.key).slice(0,d))},this.state={focused:!1}}render(){const{x:a,y:b,maxLength:c,value:g}=this.props,{focused:h}=this.state;return d.createElement("g",{tabIndex:1,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,style:{outline:"none"}},d.createElement("rect",{x:a-2,y:b-2,height:0.5*f.BLOCK_SIZE+4,width:0.5*c*f.BLOCK_SIZE+4,fill:"transparent",stroke:"#e91e63",strokeOpacity:"0.2",strokeWidth:"1"}),d.createElement(e.default,{x:a,y:b,content:g,fill:"#ccc"}),d.createElement("rect",{x:a+8*g.length,y:b-1.5,width:"1",height:"11",fill:h?"orange":"transparent"}))}}b.default=g}},[369]);